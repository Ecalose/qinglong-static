(self.webpackChunk=self.webpackChunk||[]).push([[6798],{78225:function(R){R.exports={container:"container___1Vesg",right:"right___13hbf",title:"title___2PM01",desc:"desc___3GKpO"}},93494:function(){},42954:function(R,r,e){"use strict";e.d(r,{m:function(){return L.m}});var L=e(55888),M=e(74927)},92049:function(R,r,e){"use strict";e.r(r);var L=e(57002),M=e(35513),K=e(12924),u=e.n(K),z=e(78225),_=e.n(z),T=M.Z.Link,D=()=>u().createElement("div",{className:_().container},u().createElement("img",{alt:"logo",style:{width:140,marginRight:20},src:"http://qn.whyour.cn/logo.png"}),u().createElement("div",{className:_().right},u().createElement("span",{className:_().title},"\u9752\u9F99"),u().createElement("span",{className:_().desc},"\u652F\u6301python3\u3001javaScript\u3001shell\u3001typescript \u7684\u5B9A\u65F6\u4EFB\u52A1\u7BA1\u7406\u9762\u677F\uFF08A timed task management panel that supports typescript, javaScript, python3, and shell.\uFF09"),u().createElement("div",null,u().createElement(T,{href:"https://github.com/whyour/qinglong",target:"_blank",style:{marginRight:15}},"Github"),u().createElement(T,{href:"https://t.me/jiao_long",target:"_blank",style:{marginRight:15}},"Telegram\u9891\u9053"),u().createElement(T,{href:"https://github.com/whyour/qinglong/issues",target:"_blank"},"\u63D0\u4EA4BUG"))));r.default=D},93176:function(R,r,e){"use strict";e.r(r);var L=e(21959),M=e(90486),K=e(68677),u=e(84476),z=e(41615),_=e(1977),T=e(15961),D=e(89744),Z=e(18158),E=e(30606),s=e(27773),m=e(11164),c=e(70307),O=e(22205),o=e.n(O),l=e(12924),t=e.n(l),f=e(76225),B=e(6429),i=G=>{var C=G.app,Y=G.handleCancel,U=G.visible,V=m.Z.useForm(),X=(0,c.Z)(V,1),S=X[0],x=(0,l.useState)(!1),p=(0,c.Z)(x,2),a=p[0],y=p[1],g=function(){var d=(0,E.Z)(o().mark(function I(F){var $,b,v,W,N;return o().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return y(!0),$=C?"put":"post",b=(0,Z.Z)({},F),C&&(b.id=C.id),j.next=6,f.W[$]("".concat(B.Z.apiPrefix,"apps"),{data:b});case 6:v=j.sent,W=v.code,N=v.data,W===200?D.ZP.success(C?"\u66F4\u65B0\u5E94\u7528\u6210\u529F":"\u65B0\u5EFA\u5E94\u7528\u6210\u529F"):D.ZP.error(N),y(!1),Y(N);case 12:case"end":return j.stop()}},I)}));return function(F){return d.apply(this,arguments)}}();return(0,l.useEffect)(()=>{S.resetFields()},[C,U]),t().createElement(M.Z,{title:C?"\u7F16\u8F91\u5E94\u7528":"\u65B0\u5EFA\u5E94\u7528",visible:U,forceRender:!0,centered:!0,maskClosable:!1,onOk:()=>{S.validateFields().then(d=>{g(d)}).catch(d=>{console.log("Validate Failed:",d)})},onCancel:()=>Y(),confirmLoading:a},t().createElement(m.Z,{form:S,layout:"vertical",name:"form_app_modal",initialValues:C},t().createElement(m.Z.Item,{name:"name",label:"\u540D\u79F0"},t().createElement(_.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0"})),t().createElement(m.Z.Item,{name:"scopes",label:"\u6743\u9650",rules:[{required:!0}]},t().createElement(u.Z,{mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u6A21\u5757\u6743\u9650",allowClear:!0,style:{width:"100%"}},B.Z.scopes.map(d=>t().createElement(u.Z.Option,{value:d.value},d.name))))))};r.default=i},77912:function(R,r,e){"use strict";e.r(r);var L=e(10913),M=e(66650),K=e(21959),u=e(90486),z=e(15961),_=e(89744),T=e(70307),D=e(10956),Z=e(95042),E=e(12924),s=e.n(E),m=e(76225),c=e(6429),O=e(24242),o=Z.Z.Countdown,l=t=>{var f=t.socketMessage,B=(0,E.useState)(!1),i=(0,T.Z)(B,2),G=i[0],C=i[1],Y=(0,E.useState)(""),U=(0,T.Z)(Y,2),V=U[0],X=U[1],S=(0,E.useRef)(),x=()=>{G||(C(!0),_.ZP.loading("\u68C0\u67E5\u66F4\u65B0\u4E2D...",0),m.W.put("".concat(c.Z.apiPrefix,"system/update-check")).then(g=>{_.ZP.destroy();var d=g.code,I=g.data;d===200?I.hasNewVersion?a(I):p():_.ZP.error(I)}).catch(g=>{_.ZP.destroy(),console.log(g)}).finally(()=>{C(!1)}))},p=()=>{u.Z.confirm({width:500,title:"\u66F4\u65B0",content:s().createElement(s().Fragment,null,s().createElement("div",null,"\u5DF2\u7ECF\u662F\u6700\u65B0\u7248\u4E86\uFF01"),s().createElement("div",{style:{fontSize:12,fontWeight:400,marginTop:5}},"\u9752\u9F99 ",O.i8," \u662F\u76EE\u524D\u68C0\u6D4B\u5230\u7684\u6700\u65B0\u53EF\u7528\u7248\u672C\u4E86\u3002")),okText:"\u786E\u8BA4",cancelText:"\u5F3A\u5236\u66F4\u65B0",onCancel(){y(),m.W.put("".concat(c.Z.apiPrefix,"system/update")).then(g=>{}).catch(g=>{console.log(g)})}})},a=g=>{var d=g.lastVersion,I=g.lastLog;u.Z.confirm({width:500,title:s().createElement(s().Fragment,null,s().createElement("div",null,"\u66F4\u65B0\u53EF\u7528"),s().createElement("div",{style:{fontSize:12,fontWeight:400,marginTop:5}},"\u65B0\u7248\u672C",d,"\u53EF\u7528\u3002\u4F60\u4F7F\u7528\u7684\u7248\u672C\u4E3A",O.i8,"\u3002")),content:s().createElement("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",paddingTop:15,fontSize:12,fontWeight:400}},I),okText:"\u66F4\u65B0",cancelText:"\u4EE5\u540E\u518D\u8BF4",onOk(){y(),m.W.put("".concat(c.Z.apiPrefix,"system/update")).then(F=>{}).catch(F=>{console.log(F)})}})},y=()=>{S.current=u.Z.info({width:600,maskClosable:!1,closable:!1,okButtonProps:{disabled:!0},title:"\u66F4\u65B0\u65E5\u5FD7",centered:!0,content:s().createElement("div",{style:{height:"60vh",overflowY:"auto"}},s().createElement("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",fontSize:12,fontWeight:400}},V))})};return(0,E.useEffect)(()=>{if(!(!S.current||!f)){var g=f.type,d=f.message,I=f.references;if(g==="updateSystemVersion"){var F="".concat(V).concat(d);S.current.update({content:s().createElement("div",{style:{height:"60vh",overflowY:"auto"}},s().createElement("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",fontSize:12,fontWeight:400}},F),s().createElement("div",{id:"log-identifier",style:{paddingBottom:5}}))}),X(F),document.getElementById("log-identifier")&&document.getElementById("log-identifier").scrollIntoView({behavior:"smooth",block:"nearest"}),d.includes("\u91CD\u542F\u9762\u677F")&&(_.ZP.warning({content:s().createElement("span",null,"\u7CFB\u7EDF\u5C06\u5728",s().createElement(o,{className:"inline-countdown",format:"ss",value:Date.now()+1e3*30}),"\u79D2\u540E\u81EA\u52A8\u5237\u65B0"),duration:30}),setTimeout(()=>{window.location.reload()},3e4))}}},[f]),s().createElement(s().Fragment,null,s().createElement(M.Z,{type:"primary",onClick:x},"\u68C0\u67E5\u66F4\u65B0"))};r.default=l},90863:function(R,r,e){"use strict";e.r(r),e.d(r,{default:function(){return ue}});var L=e(41615),M=e(1977),K=e(18481),u=e(88359),z=e(43449),_=e(159),T=e(62077),D=e(308),Z=e(3553),E=e(83769),s=e(10913),m=e(66650),c=e(18158),O=e(15961),o=e(89744),l=e(21959),t=e(90486),f=e(27773),B=e(11164),i=e(70307),G=e(32819),C=e(52715),Y=e(92503),U=e(89772),V=e(59994),X=e(72531),S=e(57002),x=e(35513),p=e(12924),a=e.n(p),y=e(6429),g=e(82867),d=e(76225),I=e(71571),F=e(93176),$=e(42479),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},v=b,W=e(1719),N=function(ee,q){return p.createElement(W.Z,(0,$.Z)((0,$.Z)({},ee),{},{ref:q,icon:v}))};N.displayName="ReloadOutlined";var w=p.forwardRef(N),j=e(36531),ne=e(27478),_e=e(89301),le=e(72591),Ee=e(71772),oe=e(77912),H=e(92049),J=x.Z.Text,me=[{label:"\u4EAE\u8272",value:"light"},{label:"\u6697\u8272",value:"dark"},{label:"\u8DDF\u968F\u7CFB\u7EDF",value:"auto"}],re=Q=>{var ee=Q.headerStyle,q=Q.isPhone,ce=Q.user,se=Q.reloadUser,ge=Q.reloadTheme,ve=Q.socketMessage,pe=[{title:"\u540D\u79F0",dataIndex:"name",key:"name",align:"center"},{title:"Client ID",dataIndex:"client_id",key:"client_id",align:"center",render:(n,h)=>a().createElement(J,{copyable:!0},h.client_id)},{title:"Client Secret",dataIndex:"client_secret",key:"client_secret",align:"center",render:(n,h)=>a().createElement(J,{copyable:{text:h.client_secret}},"*******")},{title:"\u6743\u9650",dataIndex:"scopes",key:"scopes",align:"center",render:(n,h)=>h.scopes.map(A=>a().createElement(X.Z,{key:A},y.Z.scopesMap[A]))},{title:"\u64CD\u4F5C",key:"action",align:"center",render:(n,h,A)=>{var k=!q;return a().createElement(C.Z,{size:"middle",style:{paddingLeft:8}},a().createElement(U.Z,{title:k?"\u7F16\u8F91":""},a().createElement("a",{onClick:()=>lt(h,A)},a().createElement(j.Z,null))),a().createElement(U.Z,{title:k?"\u91CD\u7F6Esecret":""},a().createElement("a",{onClick:()=>rt(h,A)},a().createElement(w,null))),a().createElement(U.Z,{title:k?"\u5220\u9664":""},a().createElement("a",{onClick:()=>ot(h,A)},a().createElement(ne.Z,null))))}}],Pe=(0,p.useState)(!0),ie=(0,i.Z)(Pe,2),fe=ie[0],P=ie[1],te=localStorage.getItem("qinglong_dark_theme")||"auto",Le=(0,p.useState)([]),Me=(0,i.Z)(Le,2),de=Me[0],De=Me[1],Re=(0,p.useState)(!1),Be=(0,i.Z)(Re,2),Ue=Be[0],he=Be[1],Ke=(0,p.useState)(),Oe=(0,i.Z)(Ke,2),Se=Oe[0],ye=Oe[1],xe=(0,p.useState)("security"),Ce=(0,i.Z)(xe,2),be=Ce[0],ze=Ce[1],Ge=(0,p.useState)([]),Ae=(0,i.Z)(Ge,2),Xe=Ae[0],Ne=Ae[1],Ve=(0,p.useState)(),Te=(0,i.Z)(Ve,2),$e=Te[0],je=Te[1],He=(0,p.useState)(),Fe=(0,i.Z)(He,2),Ze=Fe[0],Ie=Fe[1],Qe=B.Z.useForm(),Ye=(0,i.Z)(Qe,1),ke=Ye[0],ae=I||{},Je=ae.enable,we=ae.disable,mt=ae.exportGeneratedCSS,qe=ae.setFetchMethod,et=ae.auto,tt=n=>{var h=n.target.value;localStorage.setItem("qinglong_dark_theme",n.target.value),qe(fetch),h==="dark"?Je({}):h==="light"?we():et({}),ge()},at=()=>{P(!0),d.W.get("".concat(y.Z.apiPrefix,"apps")).then(n=>{De(n.data)}).finally(()=>P(!1))},nt=()=>{ye(null),he(!0)},lt=(n,h)=>{ye(n),he(!0)},ot=(n,h)=>{t.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:a().createElement(a().Fragment,null,"\u786E\u8BA4\u5220\u9664\u5E94\u7528"," ",a().createElement(J,{style:{wordBreak:"break-all"},type:"warning"},n.name)," ","\u5417"),onOk(){d.W.delete("".concat(y.Z.apiPrefix,"apps"),{data:[n.id]}).then(A=>{if(A.code===200){o.ZP.success("\u5220\u9664\u6210\u529F");var k=[...de];k.splice(h,1),De(k)}else o.ZP.error(A)})},onCancel(){console.log("Cancel")}})},rt=(n,h)=>{t.Z.confirm({title:"\u786E\u8BA4\u91CD\u7F6E",content:a().createElement(a().Fragment,null,"\u786E\u8BA4\u91CD\u7F6E\u5E94\u7528"," ",a().createElement(J,{style:{wordBreak:"break-all"},type:"warning"},n.name)," ","\u7684Secret\u5417",a().createElement("br",null),a().createElement(J,{type:"secondary"},"\u91CD\u7F6ESecret\u4F1A\u8BA9\u5F53\u524D\u5E94\u7528\u6240\u6709token\u5931\u6548")),onOk(){d.W.put("".concat(y.Z.apiPrefix,"apps/").concat(n.id,"/reset-secret")).then(A=>{A.code===200?(o.ZP.success("\u91CD\u7F6E\u6210\u529F"),We(A.data)):o.ZP.error(A)})},onCancel(){console.log("Cancel")}})},ut=n=>{he(!1),n&&We(n)},We=n=>{var h=de.findIndex(k=>k.id===n.id),A=[...de];h===-1?A.push(n):A.splice(h,1,(0,c.Z)({},n)),De(A)},st=()=>{d.W.get("".concat(y.Z.apiPrefix,"user/login-log")).then(n=>{Ne(n.data)}).catch(n=>{console.log(n)})},it=n=>{ze(n),n==="app"?at():n==="login"?st():n==="notification"?dt():n==="other"&&_t()},dt=()=>{d.W.get("".concat(y.Z.apiPrefix,"user/notification")).then(n=>{je(n.data)}).catch(n=>{console.log(n)})},_t=()=>{d.W.get("".concat(y.Z.apiPrefix,"system/log/remove")).then(n=>{if(n.data.info){var h=n.data.info.frequency;Ie(h)}}).catch(n=>{console.log(n)})},Et=()=>{setTimeout(()=>{d.W.put("".concat(y.Z.apiPrefix,"system/log/remove"),{data:{frequency:Ze}}).then(n=>{o.ZP.success("\u66F4\u65B0\u6210\u529F")}).catch(n=>{console.log(n)})})};return a().createElement(g.ZP,{className:"ql-container-wrapper",title:"\u7CFB\u7EDF\u8BBE\u7F6E",header:{style:ee},extra:be==="app"?[a().createElement(m.Z,{key:"2",type:"primary",onClick:()=>nt()},"\u65B0\u5EFA\u5E94\u7528")]:[]},a().createElement(E.Z,{defaultActiveKey:"security",size:"small",tabPosition:"top",onChange:it},a().createElement(E.Z.TabPane,{tab:"\u5B89\u5168\u8BBE\u7F6E",key:"security"},a().createElement(_e.default,{user:ce,userChange:se})),a().createElement(E.Z.TabPane,{tab:"\u5E94\u7528\u8BBE\u7F6E",key:"app"},a().createElement(D.Z,{columns:pe,pagination:!1,dataSource:de,rowKey:"id",size:"middle",scroll:{x:768},loading:fe})),a().createElement(E.Z.TabPane,{tab:"\u901A\u77E5\u8BBE\u7F6E",key:"notification"},a().createElement(Ee.default,{data:$e})),a().createElement(E.Z.TabPane,{tab:"\u767B\u5F55\u65E5\u5FD7",key:"login"},a().createElement(le.default,{data:Xe})),a().createElement(E.Z.TabPane,{tab:"\u5176\u4ED6\u8BBE\u7F6E",key:"other"},a().createElement(B.Z,{layout:"vertical",form:ke},a().createElement(B.Z.Item,{label:"\u4E3B\u9898\u8BBE\u7F6E",name:"theme",initialValue:te},a().createElement(_.ZP.Group,{options:me,onChange:tt,value:te,optionType:"button",buttonStyle:"solid"})),a().createElement(B.Z.Item,{label:"\u65E5\u5FD7\u5220\u9664\u9891\u7387",name:"frequency",tooltip:"\u6BCFx\u5929\u81EA\u52A8\u5220\u9664x\u5929\u4EE5\u524D\u7684\u65E5\u5FD7"},a().createElement(M.Z.Group,{compact:!0},a().createElement(u.Z,{addonBefore:"\u6BCF",addonAfter:"\u5929",style:{width:150},min:0,value:Ze,onChange:n=>Ie(n)}),a().createElement(m.Z,{type:"primary",onClick:Et},"\u786E\u8BA4"))),a().createElement(B.Z.Item,{label:"\u68C0\u67E5\u66F4\u65B0",name:"update"},a().createElement(oe.default,{socketMessage:ve})))),a().createElement(E.Z.TabPane,{tab:"\u5173\u4E8E",key:"about"},a().createElement(H.default,null))),a().createElement(F.default,{visible:Ue,handleCancel:ut,app:Se}))},ue=re},72591:function(R,r,e){"use strict";e.r(r);var L=e(62077),M=e(308),K=e(59994),u=e(72531),z=e(57002),_=e(35513),T=e(12924),D=e.n(T),Z=_.Z.Text,E=_.Z.Link,s;(function(o){o[o.\u6210\u529F=0]="\u6210\u529F",o[o.\u5931\u8D25=1]="\u5931\u8D25"})(s||(s={}));var m;(function(o){o[o.success=0]="success",o[o.error=1]="error"})(m||(m={}));var c=[{title:"\u5E8F\u53F7",align:"center",width:50,render:(o,l,t)=>t+1},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"timestamp",key:"timestamp",align:"center",render:(o,l)=>new Date(l.timestamp).toLocaleString()},{title:"\u767B\u5F55\u5730\u5740",dataIndex:"address",key:"address",align:"center"},{title:"\u767B\u5F55IP",dataIndex:"ip",key:"ip",align:"center"},{title:"\u767B\u5F55\u8BBE\u5907",dataIndex:"platform",key:"platform",align:"center"},{title:"\u767B\u5F55\u72B6\u6001",dataIndex:"status",key:"status",align:"center",render:(o,l)=>D().createElement(u.Z,{color:m[l.status],style:{marginRight:0}},s[l.status])}],O=o=>{var l=o.data;return D().createElement(D().Fragment,null,D().createElement(M.Z,{columns:c,pagination:!1,dataSource:l,rowKey:"id",size:"middle",scroll:{x:768}}))};r.default=O},71772:function(R,r,e){"use strict";e.r(r);var L=e(10913),M=e(66650),K=e(41615),u=e(1977),z=e(15961),_=e(89744),T=e(18158),D=e(27773),Z=e(11164),E=e(70307),s=e(68677),m=e(84476),c=e(12924),O=e.n(c),o=e(76225),l=e(6429),t=m.Z.Option,f=B=>{var i=B.data,G=(0,c.useState)(!1),C=(0,E.Z)(G,2),Y=C[0],U=C[1],V=(0,c.useState)("closed"),X=(0,E.Z)(V,2),S=X[0],x=X[1],p=(0,c.useState)([]),a=(0,E.Z)(p,2),y=a[0],g=a[1],d=Z.Z.useForm(),I=(0,E.Z)(d,1),F=I[0],$=v=>{v.type=="closed"&&(v.type=""),o.W.put("".concat(l.Z.apiPrefix,"user/notification"),{data:(0,T.Z)({},v)}).then(W=>{W&&W.code===200?_.ZP.success(v.type?"\u901A\u77E5\u53D1\u9001\u6210\u529F":"\u901A\u77E5\u5173\u95ED\u6210\u529F"):_.ZP.error(W.data)}).catch(W=>{console.log(W)})},b=v=>{x(v);var W=l.Z.notificationModeMap[v];g(W||[])};return(0,c.useEffect)(()=>{i&&i.type&&(b(i.type),F.setFieldsValue((0,T.Z)({},i)))},[i]),O().createElement("div",null,O().createElement(Z.Z,{onFinish:$,form:F,layout:"vertical"},O().createElement(Z.Z.Item,{label:"\u901A\u77E5\u65B9\u5F0F",name:"type",rules:[{required:!0}],style:{maxWidth:400},initialValue:S},O().createElement(m.Z,{onChange:b},l.Z.notificationModes.map(v=>O().createElement(t,{value:v.value},v.label)))),y.map(v=>O().createElement(Z.Z.Item,{label:v.label,name:v.label,extra:v.tip,rules:[{required:v.required}],style:{maxWidth:400}},O().createElement(u.Z.TextArea,{autoSize:!0,placeholder:"\u8BF7\u8F93\u5165".concat(v.label)}))),O().createElement(M.Z,{type:"primary",htmlType:"submit"},"\u4FDD\u5B58")))};r.default=f},89301:function(R,r,e){"use strict";e.r(r);var L=e(54965),M=e(16006),K=e(1020),u=e(47695),z=e(27773),_=e(11164),T=e(10913),D=e(66650),Z=e(41615),E=e(1977),s=e(15961),m=e(89744),c=e(70307),O=e(57002),o=e(35513),l=e(12924),t=e.n(l),f=e(76225),B=e(6429),i=e(42954),G=e(30163),C=e.n(G),Y=e(31877),U=e(96249),V=e(23311),X=e(23086),S=e(34306),x=o.Z.Title,p=o.Z.Link,a=y=>{var g=y.user,d=y.userChange,I=(0,l.useState)(!1),F=(0,c.Z)(I,2),$=F[0],b=F[1],v=(0,l.useState)(),W=(0,c.Z)(v,2),N=W[0],w=W[1],j=(0,l.useState)(!1),ne=(0,c.Z)(j,2),_e=ne[0],le=ne[1],Ee=(0,l.useState)(),oe=(0,c.Z)(Ee,2),H=oe[0],J=oe[1],me=(0,l.useState)(),re=(0,c.Z)(me,2),ue=re[0],Q=re[1],ee=(0,l.useState)(),q=(0,c.Z)(ee,2),ce=q[0],se=q[1],ge=P=>{f.W.put("".concat(B.Z.apiPrefix,"user"),{data:{username:P.username,password:P.password}}).then(te=>{localStorage.removeItem(B.Z.authKey),i.m.push("/login")}).catch(te=>{console.log(te)})},ve=()=>{N?pe():(ie(),le(!0))},pe=()=>{f.W.put("".concat(B.Z.apiPrefix,"user/two-factor/deactive")).then(P=>{P.data&&(w(!1),d())}).catch(P=>{console.log(P)})},Pe=()=>{b(!0),f.W.put("".concat(B.Z.apiPrefix,"user/two-factor/active"),{data:{code:ue}}).then(P=>{P.data?(m.ZP.success("\u6FC0\u6D3B\u6210\u529F"),le(!1),w(!0),d()):m.ZP.success("\u9A8C\u8BC1\u5931\u8D25")}).catch(P=>{console.log(P)}).finally(()=>b(!1))},ie=()=>{f.W.get("".concat(B.Z.apiPrefix,"user/two-factor/init")).then(P=>{J(P.data)}).catch(P=>{console.log(P)})},fe=P=>{P.file&&P.file.response&&(se("/api/static/".concat(P.file.response.data)),d())};return(0,l.useEffect)(()=>{w(g&&g.twoFactorActivated),se(g.avatar&&"/api/static/".concat(g.avatar))},[g]),_e?t().createElement(t().Fragment,null,H?t().createElement("div",null,t().createElement(x,{level:5},"\u7B2C\u4E00\u6B65"),"\u4E0B\u8F7D\u4E24\u6B65\u9A8C\u8BC1\u624B\u673A\u5E94\u7528\uFF0C\u6BD4\u5982 Google Authenticator \u3001",t().createElement(p,{href:"https://www.microsoft.com/en-us/security/mobile-authenticator-app",target:"_blank"},"Microsoft Authenticator"),"\u3001",t().createElement(p,{href:"https://authy.com/download/",target:"_blank"},"Authy"),"\u3001",t().createElement(p,{href:"https://support.1password.com/one-time-passwords/",target:"_blank"},"1Password"),"\u3001",t().createElement(p,{href:"https://support.logmeininc.com/lastpass/help/lastpass-authenticator-lp030014",target:"_blank"},"LastPass Authenticator"),t().createElement(x,{style:{marginTop:5},level:5},"\u7B2C\u4E8C\u6B65"),"\u4F7F\u7528\u624B\u673A\u5E94\u7528\u626B\u63CF\u4E8C\u7EF4\u7801\uFF0C\u6216\u8005\u8F93\u5165\u79D8\u94A5 ",H==null?void 0:H.secret,t().createElement("div",{style:{marginTop:10}},t().createElement(C(),{style:{border:"1px solid #21262d",borderRadius:6},includeMargin:!0,size:187,value:H==null?void 0:H.url})),t().createElement(x,{style:{marginTop:5},level:5},"\u7B2C\u4E09\u6B65"),"\u8F93\u5165\u624B\u673A\u5E94\u7528\u4E0A\u76846\u4F4D\u6570\u5B57",t().createElement(E.Z,{style:{margin:"10px 0 10px 0",display:"block",maxWidth:200},value:ue,onChange:P=>Q(P.target.value),placeholder:"123456"}),t().createElement(D.Z,{type:"primary",loading:$,onClick:Pe},"\u5B8C\u6210\u8BBE\u7F6E")):t().createElement(Y.Z,null)):t().createElement(t().Fragment,null,t().createElement("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4}},"\u4FEE\u6539\u7528\u6237\u540D\u5BC6\u7801"),t().createElement(_.Z,{onFinish:ge,layout:"vertical"},t().createElement(_.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!0}],hasFeedback:!0,style:{maxWidth:300}},t().createElement(E.Z,{placeholder:"\u7528\u6237\u540D"})),t().createElement(_.Z.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!0},{pattern:/^(?!admin$).*$/,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3Aadmin"}],hasFeedback:!0,style:{maxWidth:300}},t().createElement(E.Z,{type:"password",placeholder:"\u5BC6\u7801"})),t().createElement(D.Z,{type:"primary",htmlType:"submit"},"\u4FDD\u5B58")),t().createElement("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4,marginTop:16}},"\u4E24\u6B65\u9A8C\u8BC1"),t().createElement(D.Z,{type:"primary",danger:N,onClick:ve},N?"\u7981\u7528":"\u542F\u7528"),t().createElement("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4,marginTop:16}},"\u5934\u50CF"),t().createElement(u.C,{size:128,shape:"square",icon:t().createElement(U.Z,null),src:ce}),t().createElement(X.Z,{rotate:!0},t().createElement(M.Z,{method:"put",showUploadList:!1,maxCount:1,action:"/api/user/avatar",onChange:fe,name:"avatar",headers:{Authorization:"Bearer ".concat(localStorage.getItem(B.Z.authKey))}},t().createElement(D.Z,{icon:t().createElement(V.Z,null),style:{marginLeft:8}},"\u66F4\u6362\u5934\u50CF"))))};r.default=a},6429:function(R,r){"use strict";r.Z={siteName:"\u9752\u9F99\u63A7\u5236\u9762\u677F",apiPrefix:"/api/",authKey:"token",layouts:[{name:"primary",include:[/.*/],exclude:[/(\/(en|zh))*\/login/]}],i18n:{languages:[{key:"pt-br",title:"Portugu\xEAs",flag:"/portugal.svg"},{key:"en",title:"English",flag:"/america.svg"},{key:"zh",title:"\u4E2D\u6587",flag:"/china.svg"}],defaultLanguage:"en"},scopes:[{name:"\u5B9A\u65F6\u4EFB\u52A1",value:"crons"},{name:"\u73AF\u5883\u53D8\u91CF",value:"envs"},{name:"\u8BA2\u9605\u7BA1\u7406",value:"subscriptions"},{name:"\u914D\u7F6E\u6587\u4EF6",value:"configs"},{name:"\u811A\u672C\u7BA1\u7406",value:"scripts"},{name:"\u4EFB\u52A1\u65E5\u5FD7",value:"logs"},{name:"\u4F9D\u8D56\u7BA1\u7406",value:"dependencies"},{name:"\u7CFB\u7EDF\u4FE1\u606F",value:"system"}],scopesMap:{crons:"\u5B9A\u65F6\u4EFB\u52A1",envs:"\u73AF\u5883\u53D8\u91CF",subscriptions:"\u8BA2\u9605\u7BA1\u7406",configs:"\u914D\u7F6E\u6587\u4EF6",scripts:"\u811A\u672C\u7BA1\u7406",logs:"\u4EFB\u52A1\u65E5\u5FD7",dependencies:"\u4F9D\u8D56\u7BA1\u7406",system:"\u7CFB\u7EDF\u4FE1\u606F"},notificationModes:[{value:"gotify",label:"Gotify"},{value:"goCqHttpBot",label:"GoCqHttpBot"},{value:"serverChan",label:"Server\u9171"},{value:"pushDeer",label:"PushDeer"},{value:"bark",label:"Bark"},{value:"telegramBot",label:"Telegram\u673A\u5668\u4EBA"},{value:"dingtalkBot",label:"\u9489\u9489\u673A\u5668\u4EBA"},{value:"weWorkBot",label:"\u4F01\u4E1A\u5FAE\u4FE1\u673A\u5668\u4EBA"},{value:"weWorkApp",label:"\u4F01\u4E1A\u5FAE\u4FE1\u5E94\u7528"},{value:"iGot",label:"IGot"},{value:"pushPlus",label:"PushPlus"},{value:"email",label:"\u90AE\u7BB1"},{value:"closed",label:"\u5DF2\u5173\u95ED"}],notificationModeMap:{gotify:[{label:"gotifyUrl",tip:"gotify\u7684url\u5730\u5740,\u4F8B\u5982 https://push.example.de:8080",required:!0},{label:"gotifyToken",tip:"gotify\u7684\u6D88\u606F\u5E94\u7528token\u7801",required:!0},{label:"gotifyPriority",tip:"\u63A8\u9001\u6D88\u606F\u7684\u4F18\u5148\u7EA7"}],goCqHttpBot:[{label:"goCqHttpBotUrl",tip:"\u63A8\u9001\u5230\u4E2A\u4EBAQQ: http://127.0.0.1/send_private_msg\uFF0C\u7FA4\uFF1Ahttp://127.0.0.1/send_group_msg",required:!0},{label:"goCqHttpBotToken",tip:"\u8BBF\u95EE\u5BC6\u94A5",required:!0},{label:"goCqHttpBotQq",tip:"\u5982\u679CGOBOT_URL\u8BBE\u7F6E /send_private_msg \u5219\u9700\u8981\u586B\u5165 user_id=\u4E2A\u4EBAQQ \u76F8\u53CD\u5982\u679C\u662F /send_group_msg \u5219\u9700\u8981\u586B\u5165 group_id=QQ\u7FA4",required:!0}],serverChan:[{label:"serverChanKey",tip:"Server\u9171SENDKEY",required:!0}],pushDeer:[{label:"pushDeerKey",tip:"PushDeer\u7684Key\uFF0Chttps://github.com/easychen/pushdeer",required:!0}],bark:[{label:"barkPush",tip:"Bark\u7684\u4FE1\u606FIP/\u8BBE\u5907\u7801\uFF0C\u4F8B\u5982\uFF1Ahttps://api.day.app/XXXXXXXX",required:!0},{label:"barkIcon",tip:"BARK\u63A8\u9001\u56FE\u6807,\u81EA\u5B9A\u4E49\u63A8\u9001\u56FE\u6807 (\u9700iOS15\u6216\u4EE5\u4E0A\u624D\u80FD\u663E\u793A)"},{label:"barkSound",tip:"BARK\u63A8\u9001\u94C3\u58F0,\u94C3\u58F0\u5217\u8868\u53BBAPP\u67E5\u770B\u590D\u5236\u586B\u5199"},{label:"barkGroup",tip:"BARK\u63A8\u9001\u6D88\u606F\u7684\u5206\u7EC4, \u9ED8\u8BA4\u4E3Aqinglong"}],telegramBot:[{label:"telegramBotToken",tip:"telegram\u673A\u5668\u4EBA\u7684token\uFF0C\u4F8B\u5982\uFF1A1077xxx4424:AAFjv0FcqxxxxxxgEMGfi22B4yh15R5uw",required:!0},{label:"telegramBotUserId",tip:"telegram\u7528\u6237\u7684id\uFF0C\u4F8B\u5982\uFF1A129xxx206",required:!0},{label:"telegramBotProxyHost",tip:"\u4EE3\u7406IP"},{label:"telegramBotProxyPort",tip:"\u4EE3\u7406\u7AEF\u53E3"},{label:"telegramBotProxyAuth",tip:"telegram\u4EE3\u7406\u914D\u7F6E\u8BA4\u8BC1\u53C2\u6570, \u7528\u6237\u540D\u4E0E\u5BC6\u7801\u7528\u82F1\u6587\u5192\u53F7\u8FDE\u63A5 user:password"},{label:"telegramBotApiHost",tip:"telegram api\u81EA\u5EFA\u7684\u53CD\u5411\u4EE3\u7406\u5730\u5740\uFF0C\u9ED8\u8BA4tg\u5B98\u65B9api"}],dingtalkBot:[{label:"dingtalkBotToken",tip:"\u9489\u9489\u673A\u5668\u4EBAwebhook token\uFF0C\u4F8B\u5982\uFF1A5a544165465465645d0f31dca676e7bd07415asdasd",required:!0},{label:"dingtalkBotSecret",tip:"\u5BC6\u94A5\uFF0C\u673A\u5668\u4EBA\u5B89\u5168\u8BBE\u7F6E\u9875\u9762\uFF0C\u52A0\u7B7E\u4E00\u680F\u4E0B\u9762\u663E\u793A\u7684SEC\u5F00\u5934\u7684\u5B57\u7B26\u4E32"}],weWorkBot:[{label:"weWorkBotKey",tip:"\u4F01\u4E1A\u5FAE\u4FE1\u673A\u5668\u4EBA\u7684 webhook(\u8BE6\u89C1\u6587\u6863 https://work.weixin.qq.com/api/doc/90000/90136/91770)\uFF0C\u4F8B\u5982\uFF1A693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa",required:!0}],weWorkApp:[{label:"weWorkAppKey",tip:"corpid,corpsecret,touser(\u6CE8:\u591A\u4E2A\u6210\u5458ID\u4F7F\u7528|\u9694\u5F00),agentid,\u6D88\u606F\u7C7B\u578B(\u9009\u586B,\u4E0D\u586B\u9ED8\u8BA4\u6587\u672C\u6D88\u606F\u7C7B\u578B) \u6CE8\u610F\u7528,\u53F7\u9694\u5F00(\u82F1\u6587\u8F93\u5165\u6CD5\u7684\u9017\u53F7)\uFF0C\u4F8B\u5982\uFF1Awwcfrs,B-76WERQ,qinglong,1000001,2COat",required:!0}],iGot:[{label:"iGotPushKey",tip:"iGot\u7684\u4FE1\u606F\u63A8\u9001key\uFF0C\u4F8B\u5982\uFF1Ahttps://push.hellyw.com/XXXXXXXX",required:!0}],pushPlus:[{label:"pushPlusToken",tip:"\u5FAE\u4FE1\u626B\u7801\u767B\u5F55\u540E\u4E00\u5BF9\u4E00\u63A8\u9001\u6216\u4E00\u5BF9\u591A\u63A8\u9001\u4E0B\u9762\u7684token(\u60A8\u7684Token)\uFF0C\u4E0D\u63D0\u4F9BPUSH_PLUS_USER\u5219\u9ED8\u8BA4\u4E3A\u4E00\u5BF9\u4E00\u63A8\u9001",required:!0},{label:"pushPlusUser",tip:"\u4E00\u5BF9\u591A\u63A8\u9001\u7684\u201C\u7FA4\u7EC4\u7F16\u7801\u201D\uFF08\u4E00\u5BF9\u591A\u63A8\u9001\u4E0B\u9762->\u60A8\u7684\u7FA4\u7EC4(\u5982\u65E0\u5219\u65B0\u5EFA)->\u7FA4\u7EC4\u7F16\u7801\uFF0C\u5982\u679C\u60A8\u662F\u521B\u5EFA\u7FA4\u7EC4\u4EBA\u3002\u4E5F\u9700\u70B9\u51FB\u201C\u67E5\u770B\u4E8C\u7EF4\u7801\u201D\u626B\u63CF\u7ED1\u5B9A\uFF0C\u5426\u5219\u4E0D\u80FD\u63A5\u53D7\u7FA4\u7EC4\u6D88\u606F\u63A8\u9001\uFF09"}],email:[{label:"emailService",tip:"\u90AE\u7BB1\u670D\u52A1\u540D\u79F0\uFF0C\u6BD4\u5982126\u3001163\u3001Gmail\u3001QQ\u7B49\uFF0C\u652F\u6301\u5217\u8868https://nodemailer.com/smtp/well-known/",required:!0},{label:"emailUser",tip:"\u90AE\u7BB1\u5730\u5740",required:!0},{label:"emailPass",tip:"\u90AE\u7BB1SMTP\u6388\u6743\u7801",required:!0}]},documentTitleMap:{"/login":"\u767B\u5F55","/initialization":"\u521D\u59CB\u5316","/cron":"\u5B9A\u65F6\u4EFB\u52A1","/env":"\u73AF\u5883\u53D8\u91CF","/subscription":"\u8BA2\u9605\u7BA1\u7406","/config":"\u914D\u7F6E\u6587\u4EF6","/script":"\u811A\u672C\u7BA1\u7406","/diff":"\u5BF9\u6BD4\u5DE5\u5177","/log":"\u4EFB\u52A1\u65E5\u5FD7","/setting":"\u7CFB\u7EDF\u8BBE\u7F6E","/error":"\u9519\u8BEF\u65E5\u5FD7"},dependenceTypes:["nodejs","python3","linux"]}},76225:function(R,r,e){"use strict";e.d(r,{W:function(){return O}});var L=e(30606),M=e(18158),K=e(15961),u=e(89744),z=e(22205),_=e.n(z),T=e(50659),D=e(6429),Z=e(42954);u.ZP.config({duration:1.5});var E=Date.now(),s=function(l){if(l.response){var t=l.data?l.data.message||l.message||l.data:l.response.statusText,f=l.response.status;[502,504].includes(f)?Z.m.push("/error"):f===401?Z.m.location.pathname!=="/login"&&(u.ZP.error("\u767B\u5F55\u5DF2\u8FC7\u671F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55"),localStorage.removeItem(D.Z.authKey),Z.m.push("/login")):u.ZP.error(t)}else console.log(l.message);throw l},m=(0,T.l7)({timeout:6e4,params:{t:E},errorHandler:s}),c=["/api/user/login","/open/auth/token","/api/user/two-factor/login","/api/system","/api/user/init","/api/user/notification/init"];m.interceptors.request.use((o,l)=>{var t=localStorage.getItem(D.Z.authKey);if(t&&!c.includes(o)){var f={Authorization:"Bearer ".concat(t)};return{url:o,options:(0,M.Z)((0,M.Z)({},l),{},{headers:f})}}return{url:o,options:l}}),m.interceptors.response.use(function(){var o=(0,L.Z)(_().mark(function l(t){var f;return _().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.clone();case 2:return f=i.sent,i.abrupt("return",t);case 4:case"end":return i.stop()}},l)}));return function(l){return o.apply(this,arguments)}}());var O=m},24242:function(R,r,e){"use strict";e.d(r,{i8:function(){return L},N$:function(){return M}});var L="2.13.0",M="https://t.me/jiao_long/303",K=`2.13.0 \u7248\u672C\u8BF4\u660E
1. \u65B0\u589E\u8BA2\u9605\u7BA1\u7406\u6A21\u5757\uFF0C\u652F\u6301\u516C\u5F00\u4ED3\u5E93/\u79C1\u6709\u4ED3\u5E93\u7B49
2. \u652F\u6301\u4FEE\u6539\u5934\u50CF
3. \u4FEE\u590D\u7279\u6B8A\u5B57\u7B26\u73AF\u5883\u53D8\u91CF\u5F02\u5E38
4. \u4FEE\u6539\u5B9A\u65F6\u4EFB\u52A1\u6DFB\u52A0\u6807\u7B7E
5. \u4FEE\u590D\u6DFB\u52A0\u4EFB\u52A1\u9ED8\u8BA4\u4F1A\u5C55\u793A\u4E00\u4E2A\u7A7A\u6807\u7B7E
6. \u4FEE\u590D\u7528\u6237\u540D\u663E\u793A
7. \u4FEE\u590D\u4F9D\u8D56\u5B89\u88C5
8. \u5176\u4ED6bug\u4FEE\u590D
`},21959:function(R,r,e){"use strict";var L=e(12020),M=e.n(L),K=e(93494),u=e.n(K),z=e(10913)},71129:function(){}}]);
