(self.webpackChunk=self.webpackChunk||[]).push([[6798],{6781:function(R){R.exports={container:"container___1Vesg",right:"right___13hbf",title:"title___2PM01",desc:"desc___3GKpO"}},55984:function(){},9399:function(R,u,e){"use strict";e.d(u,{m:function(){return L.m}});var L=e(34890),D=e(85092)},98822:function(R,u,e){"use strict";e.r(u);var L=e(73862),D=e(22726),K=e(12924),s=e.n(K),z=e(6781),_=e.n(z),F=D.Z.Link,P=()=>s().createElement("div",{className:_().container},s().createElement("img",{alt:"logo",style:{width:140,marginRight:20},src:"http://qn.whyour.cn/logo.png"}),s().createElement("div",{className:_().right},s().createElement("span",{className:_().title},"\u9752\u9F99"),s().createElement("span",{className:_().desc},"\u652F\u6301python3\u3001javaScript\u3001shell\u3001typescript \u7684\u5B9A\u65F6\u4EFB\u52A1\u7BA1\u7406\u9762\u677F\uFF08A timed task management panel that supports typescript, javaScript, python3, and shell.\uFF09"),s().createElement("div",null,s().createElement(F,{href:"https://github.com/whyour/qinglong",target:"_blank",style:{marginRight:15}},"Github"),s().createElement(F,{href:"https://t.me/jiao_long",target:"_blank",style:{marginRight:15}},"Telegram\u9891\u9053"),s().createElement(F,{href:"https://github.com/whyour/qinglong/issues",target:"_blank"},"\u63D0\u4EA4BUG"))));u.default=P},28869:function(R,u,e){"use strict";e.r(u);var L=e(13621),D=e(13409),K=e(68875),s=e(69861),z=e(87872),_=e(85529),F=e(4224),P=e(40447),I=e(18158),E=e(30606),i=e(88790),m=e(81079),c=e(70307),y=e(22205),r=e.n(y),l=e(12924),t=e.n(l),h=e(30827),M=e(58997),o=G=>{var A=G.app,Y=G.handleCancel,U=G.visible,V=m.Z.useForm(),X=(0,c.Z)(V,1),S=X[0],x=(0,l.useState)(!1),g=(0,c.Z)(x,2),a=g[0],O=g[1],v=function(){var d=(0,E.Z)(r().mark(function B(Z){var $,b,p,W,N;return r().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return O(!0),$=A?"put":"post",b=(0,I.Z)({},Z),A&&(b.id=A.id),j.next=6,h.W[$]("".concat(M.Z.apiPrefix,"apps"),{data:b});case 6:p=j.sent,W=p.code,N=p.data,W===200?P.ZP.success(A?"\u66F4\u65B0\u5E94\u7528\u6210\u529F":"\u65B0\u5EFA\u5E94\u7528\u6210\u529F"):P.ZP.error(N),O(!1),Y(N);case 12:case"end":return j.stop()}},B)}));return function(Z){return d.apply(this,arguments)}}();return(0,l.useEffect)(()=>{S.resetFields()},[A,U]),t().createElement(D.Z,{title:A?"\u7F16\u8F91\u5E94\u7528":"\u65B0\u5EFA\u5E94\u7528",visible:U,forceRender:!0,centered:!0,onOk:()=>{S.validateFields().then(d=>{v(d)}).catch(d=>{console.log("Validate Failed:",d)})},onCancel:()=>Y(),confirmLoading:a},t().createElement(m.Z,{form:S,layout:"vertical",name:"form_app_modal",initialValues:A},t().createElement(m.Z.Item,{name:"name",label:"\u540D\u79F0"},t().createElement(_.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0"})),t().createElement(m.Z.Item,{name:"scopes",label:"\u6743\u9650",rules:[{required:!0}]},t().createElement(s.Z,{mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u6A21\u5757\u6743\u9650",allowClear:!0,style:{width:"100%"}},M.Z.scopes.map(d=>t().createElement(s.Z.Option,{value:d.value},d.name))))))};u.default=o},88801:function(R,u,e){"use strict";e.r(u);var L=e(52261),D=e(51541),K=e(13621),s=e(13409),z=e(4224),_=e(40447),F=e(70307),P=e(40838),I=e(74727),E=e(12924),i=e.n(E),m=e(30827),c=e(58997),y=e(54521),r=I.Z.Countdown,l=t=>{var h=t.socketMessage,M=(0,E.useState)(!1),o=(0,F.Z)(M,2),G=o[0],A=o[1],Y=(0,E.useState)(""),U=(0,F.Z)(Y,2),V=U[0],X=U[1],S=(0,E.useRef)(),x=()=>{G||(A(!0),_.ZP.loading("\u68C0\u67E5\u66F4\u65B0\u4E2D...",0),m.W.put("".concat(c.Z.apiPrefix,"system/update-check")).then(v=>{_.ZP.destroy();var d=v.code,B=v.data;d===200?B.hasNewVersion?a(B):g():_.ZP.error(B)}).catch(v=>{_.ZP.destroy(),console.log(v)}).finally(()=>{A(!1)}))},g=()=>{s.Z.confirm({width:500,title:"\u66F4\u65B0",content:i().createElement(i().Fragment,null,i().createElement("div",null,"\u5DF2\u7ECF\u662F\u6700\u65B0\u7248\u4E86\uFF01"),i().createElement("div",{style:{fontSize:12,fontWeight:400,marginTop:5}},"\u9752\u9F99 ",y.i8," \u662F\u76EE\u524D\u68C0\u6D4B\u5230\u7684\u6700\u65B0\u53EF\u7528\u7248\u672C\u4E86\u3002")),okText:"\u786E\u8BA4",cancelText:"\u5F3A\u5236\u66F4\u65B0",onCancel(){O(),m.W.put("".concat(c.Z.apiPrefix,"system/update")).then(v=>{}).catch(v=>{console.log(v)})}})},a=v=>{var d=v.lastVersion,B=v.lastLog;s.Z.confirm({width:500,title:i().createElement(i().Fragment,null,i().createElement("div",null,"\u66F4\u65B0\u53EF\u7528"),i().createElement("div",{style:{fontSize:12,fontWeight:400,marginTop:5}},"\u65B0\u7248\u672C",d,"\u53EF\u7528\u3002\u4F60\u4F7F\u7528\u7684\u7248\u672C\u4E3A",y.i8,"\u3002")),content:i().createElement("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",paddingTop:15,fontSize:12,fontWeight:400}},B),okText:"\u66F4\u65B0",cancelText:"\u4EE5\u540E\u518D\u8BF4",onOk(){O(),m.W.put("".concat(c.Z.apiPrefix,"system/update")).then(Z=>{}).catch(Z=>{console.log(Z)})}})},O=()=>{S.current=s.Z.info({width:600,maskClosable:!1,closable:!1,okButtonProps:{disabled:!0},title:"\u66F4\u65B0\u65E5\u5FD7",centered:!0,content:i().createElement("div",{style:{height:"60vh",overflowY:"auto"}},i().createElement("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",fontSize:12,fontWeight:400}},V))})};return(0,E.useEffect)(()=>{if(!(!S.current||!h)){var v=h.type,d=h.message,B=h.references;if(v==="updateSystemVersion"){var Z="".concat(V).concat(d);S.current.update({content:i().createElement("div",{style:{height:"60vh",overflowY:"auto"}},i().createElement("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",fontSize:12,fontWeight:400}},Z),i().createElement("div",{id:"log-identifier",style:{paddingBottom:5}}))}),X(Z),document.getElementById("log-identifier")&&document.getElementById("log-identifier").scrollIntoView({behavior:"smooth",block:"nearest"}),d.includes("\u91CD\u542F\u9762\u677F")&&(_.ZP.warning({content:i().createElement("span",null,"\u7CFB\u7EDF\u5C06\u5728",i().createElement(r,{className:"inline-countdown",format:"ss",value:Date.now()+1e3*30}),"\u79D2\u540E\u81EA\u52A8\u5237\u65B0"),duration:30}),setTimeout(()=>{window.location.reload()},3e4))}}},[h]),i().createElement(i().Fragment,null,i().createElement(D.Z,{type:"primary",onClick:x},"\u68C0\u67E5\u66F4\u65B0"))};u.default=l},50088:function(R,u,e){"use strict";e.r(u),e.d(u,{default:function(){return oe}});var L=e(87872),D=e(85529),K=e(44809),s=e(97024),z=e(57886),_=e(63858),F=e(35246),P=e(96578),I=e(51501),E=e(19213),i=e(52261),m=e(51541),c=e(18158),y=e(4224),r=e(40447),l=e(13621),t=e(13409),h=e(88790),M=e(81079),o=e(70307),G=e(80534),A=e(42853),Y=e(98983),U=e(14556),V=e(25685),X=e(42068),S=e(73862),x=e(22726),g=e(12924),a=e.n(g),O=e(58997),v=e(85844),d=e(30827),B=e(83242),Z=e(28869),$=e(19377),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},p=b,W=e(1719),N=function(te,q){return g.createElement(W.Z,(0,$.Z)((0,$.Z)({},te),{},{ref:q,icon:p}))};N.displayName="ReloadOutlined";var w=g.forwardRef(N),j=e(36531),ae=e(27478),_e=e(55541),ne=e(17890),Ee=e(76588),le=e(88801),H=e(98822),k=x.Z.Text,me=[{label:"\u4EAE\u8272",value:"light"},{label:"\u6697\u8272",value:"dark"},{label:"\u8DDF\u968F\u7CFB\u7EDF",value:"auto"}],re=Q=>{var te=Q.headerStyle,q=Q.isPhone,ce=Q.user,ue=Q.reloadUser,ge=Q.reloadTheme,ve=Q.socketMessage,pe=[{title:"\u540D\u79F0",dataIndex:"name",key:"name",align:"center"},{title:"Client ID",dataIndex:"client_id",key:"client_id",align:"center",render:(n,C)=>a().createElement(k,{copyable:!0},C.client_id)},{title:"Client Secret",dataIndex:"client_secret",key:"client_secret",align:"center",render:(n,C)=>a().createElement(k,{copyable:{text:C.client_secret}},"*******")},{title:"\u6743\u9650",dataIndex:"scopes",key:"scopes",align:"center",render:(n,C)=>C.scopes.map(T=>a().createElement(X.Z,{key:T},O.Z.scopesMap[T]))},{title:"\u64CD\u4F5C",key:"action",align:"center",render:(n,C,T)=>{var J=!q;return a().createElement(A.Z,{size:"middle",style:{paddingLeft:8}},a().createElement(U.Z,{title:J?"\u7F16\u8F91":""},a().createElement("a",{onClick:()=>nt(C,T)},a().createElement(j.Z,null))),a().createElement(U.Z,{title:J?"\u91CD\u7F6Esecret":""},a().createElement("a",{onClick:()=>rt(C,T)},a().createElement(w,null))),a().createElement(U.Z,{title:J?"\u5220\u9664":""},a().createElement("a",{onClick:()=>lt(C,T)},a().createElement(ae.Z,null))))}}],Pe=(0,g.useState)(!0),se=(0,o.Z)(Pe,2),fe=se[0],f=se[1],ie=localStorage.getItem("qinglong_dark_theme")||"auto",Re=(0,g.useState)(ie),Me=(0,o.Z)(Re,2),ee=Me[0],Ue=Me[1],Ke=(0,g.useState)([]),ye=(0,o.Z)(Ke,2),de=ye[0],he=ye[1],Se=(0,g.useState)(!1),Oe=(0,o.Z)(Se,2),xe=Oe[0],De=Oe[1],be=(0,g.useState)(),Be=(0,o.Z)(be,2),ze=Be[0],Ce=Be[1],Ge=(0,g.useState)("security"),Ae=(0,o.Z)(Ge,2),Xe=Ae[0],Ne=Ae[1],Ve=(0,g.useState)([]),Te=(0,o.Z)(Ve,2),$e=Te[0],je=Te[1],He=(0,g.useState)(),Fe=(0,o.Z)(He,2),Qe=Fe[0],Ye=Fe[1],Je=(0,g.useState)(),Ze=(0,o.Z)(Je,2),Ie=Ze[0],We=Ze[1],ke=M.Z.useForm(),we=(0,o.Z)(ke,1),qe=we[0],et=n=>{Ue(n.target.value),localStorage.setItem("qinglong_dark_theme",n.target.value)},tt=()=>{f(!0),d.W.get("".concat(O.Z.apiPrefix,"apps")).then(n=>{he(n.data)}).finally(()=>f(!1))},at=()=>{Ce(null),De(!0)},nt=(n,C)=>{Ce(n),De(!0)},lt=(n,C)=>{t.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:a().createElement(a().Fragment,null,"\u786E\u8BA4\u5220\u9664\u5E94\u7528"," ",a().createElement(k,{style:{wordBreak:"break-all"},type:"warning"},n.name)," ","\u5417"),onOk(){d.W.delete("".concat(O.Z.apiPrefix,"apps"),{data:[n.id]}).then(T=>{if(T.code===200){r.ZP.success("\u5220\u9664\u6210\u529F");var J=[...de];J.splice(C,1),he(J)}else r.ZP.error(T)})},onCancel(){console.log("Cancel")}})},rt=(n,C)=>{t.Z.confirm({title:"\u786E\u8BA4\u91CD\u7F6E",content:a().createElement(a().Fragment,null,"\u786E\u8BA4\u91CD\u7F6E\u5E94\u7528"," ",a().createElement(k,{style:{wordBreak:"break-all"},type:"warning"},n.name)," ","\u7684Secret\u5417",a().createElement("br",null),a().createElement(k,{type:"secondary"},"\u91CD\u7F6ESecret\u4F1A\u8BA9\u5F53\u524D\u5E94\u7528\u6240\u6709token\u5931\u6548")),onOk(){d.W.put("".concat(O.Z.apiPrefix,"apps/").concat(n.id,"/reset-secret")).then(T=>{T.code===200?(r.ZP.success("\u91CD\u7F6E\u6210\u529F"),Le(T.data)):r.ZP.error(T)})},onCancel(){console.log("Cancel")}})},ot=n=>{De(!1),n&&Le(n)},Le=n=>{var C=de.findIndex(J=>J.id===n.id),T=[...de];C===-1?T.push(n):T.splice(C,1,(0,c.Z)({},n)),he(T)},ut=()=>{d.W.get("".concat(O.Z.apiPrefix,"user/login-log")).then(n=>{je(n.data)}).catch(n=>{console.log(n)})},st=n=>{Ne(n),n==="app"?tt():n==="login"?ut():n==="notification"?it():n==="other"&&dt()},it=()=>{d.W.get("".concat(O.Z.apiPrefix,"user/notification")).then(n=>{Ye(n.data)}).catch(n=>{console.log(n)})},dt=()=>{d.W.get("".concat(O.Z.apiPrefix,"system/log/remove")).then(n=>{if(n.data.info){var C=n.data.info.frequency;We(C)}}).catch(n=>{console.log(n)})},_t=()=>{setTimeout(()=>{d.W.put("".concat(O.Z.apiPrefix,"system/log/remove"),{data:{frequency:Ie}}).then(n=>{r.ZP.success("\u66F4\u65B0\u6210\u529F")}).catch(n=>{console.log(n)})})};return(0,g.useEffect)(()=>{(0,B.setFetchMethod)(window.fetch),ee==="dark"?(0,B.enable)({}):ee==="light"?(0,B.disable)():(0,B.auto)({}),ge(ee)},[ee]),a().createElement(v.ZP,{className:"ql-container-wrapper",title:"\u7CFB\u7EDF\u8BBE\u7F6E",header:{style:te},extra:Xe==="app"?[a().createElement(m.Z,{key:"2",type:"primary",onClick:()=>at()},"\u65B0\u5EFA\u5E94\u7528")]:[]},a().createElement(E.Z,{defaultActiveKey:"security",size:"small",tabPosition:"top",onChange:st},a().createElement(E.Z.TabPane,{tab:"\u5B89\u5168\u8BBE\u7F6E",key:"security"},a().createElement(_e.default,{user:ce,userChange:ue})),a().createElement(E.Z.TabPane,{tab:"\u5E94\u7528\u8BBE\u7F6E",key:"app"},a().createElement(P.Z,{columns:pe,pagination:!1,dataSource:de,rowKey:"id",size:"middle",scroll:{x:768},loading:fe})),a().createElement(E.Z.TabPane,{tab:"\u901A\u77E5\u8BBE\u7F6E",key:"notification"},a().createElement(Ee.default,{data:Qe})),a().createElement(E.Z.TabPane,{tab:"\u767B\u5F55\u65E5\u5FD7",key:"login"},a().createElement(ne.default,{data:$e})),a().createElement(E.Z.TabPane,{tab:"\u5176\u4ED6\u8BBE\u7F6E",key:"other"},a().createElement(M.Z,{layout:"vertical",form:qe},a().createElement(M.Z.Item,{label:"\u4E3B\u9898\u8BBE\u7F6E",name:"theme",initialValue:ee},a().createElement(_.ZP.Group,{options:me,onChange:et,value:ee,optionType:"button",buttonStyle:"solid"})),a().createElement(M.Z.Item,{label:"\u65E5\u5FD7\u5220\u9664\u9891\u7387",name:"frequency",tooltip:"\u6BCFx\u5929\u81EA\u52A8\u5220\u9664x\u5929\u4EE5\u524D\u7684\u65E5\u5FD7"},a().createElement(D.Z.Group,{compact:!0},a().createElement(s.Z,{addonBefore:"\u6BCF",addonAfter:"\u5929",style:{width:150},min:0,value:Ie,onChange:n=>We(n)}),a().createElement(m.Z,{type:"primary",onClick:_t},"\u786E\u8BA4"))),a().createElement(M.Z.Item,{label:"\u68C0\u67E5\u66F4\u65B0",name:"update"},a().createElement(le.default,{socketMessage:ve})))),a().createElement(E.Z.TabPane,{tab:"\u5173\u4E8E",key:"about"},a().createElement(H.default,null))),a().createElement(Z.default,{visible:xe,handleCancel:ot,app:ze}))},oe=re},17890:function(R,u,e){"use strict";e.r(u);var L=e(35246),D=e(96578),K=e(25685),s=e(42068),z=e(73862),_=e(22726),F=e(12924),P=e.n(F),I=_.Z.Text,E=_.Z.Link,i;(function(r){r[r.\u6210\u529F=0]="\u6210\u529F",r[r.\u5931\u8D25=1]="\u5931\u8D25"})(i||(i={}));var m;(function(r){r[r.success=0]="success",r[r.error=1]="error"})(m||(m={}));var c=[{title:"\u5E8F\u53F7",align:"center",width:50,render:(r,l,t)=>P().createElement("span",{style:{cursor:"text"}},t+1," ")},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"timestamp",key:"timestamp",align:"center",render:(r,l)=>P().createElement("span",null,new Date(l.timestamp).toLocaleString())},{title:"\u767B\u5F55\u5730\u5740",dataIndex:"address",key:"address",align:"center"},{title:"\u767B\u5F55IP",dataIndex:"ip",key:"ip",align:"center"},{title:"\u767B\u5F55\u8BBE\u5907",dataIndex:"platform",key:"platform",align:"center"},{title:"\u767B\u5F55\u72B6\u6001",dataIndex:"status",key:"status",align:"center",render:(r,l)=>P().createElement(s.Z,{color:m[l.status],style:{marginRight:0}},i[l.status])}],y=r=>{var l=r.data;return P().createElement(P().Fragment,null,P().createElement(D.Z,{columns:c,pagination:!1,dataSource:l,rowKey:"id",size:"middle",scroll:{x:768}}))};u.default=y},76588:function(R,u,e){"use strict";e.r(u);var L=e(52261),D=e(51541),K=e(87872),s=e(85529),z=e(4224),_=e(40447),F=e(18158),P=e(88790),I=e(81079),E=e(70307),i=e(68875),m=e(69861),c=e(12924),y=e.n(c),r=e(30827),l=e(58997),t=m.Z.Option,h=M=>{var o=M.data,G=(0,c.useState)(!1),A=(0,E.Z)(G,2),Y=A[0],U=A[1],V=(0,c.useState)("closed"),X=(0,E.Z)(V,2),S=X[0],x=X[1],g=(0,c.useState)([]),a=(0,E.Z)(g,2),O=a[0],v=a[1],d=I.Z.useForm(),B=(0,E.Z)(d,1),Z=B[0],$=p=>{p.type=="closed"&&(p.type=""),r.W.put("".concat(l.Z.apiPrefix,"user/notification"),{data:(0,F.Z)({},p)}).then(W=>{W&&W.code===200?_.ZP.success(p.type?"\u901A\u77E5\u53D1\u9001\u6210\u529F":"\u901A\u77E5\u5173\u95ED\u6210\u529F"):_.ZP.error(W.data)}).catch(W=>{console.log(W)})},b=p=>{x(p);var W=l.Z.notificationModeMap[p];v(W||[])};return(0,c.useEffect)(()=>{o&&o.type&&(b(o.type),Z.setFieldsValue((0,F.Z)({},o)))},[o]),y().createElement("div",null,y().createElement(I.Z,{onFinish:$,form:Z,layout:"vertical"},y().createElement(I.Z.Item,{label:"\u901A\u77E5\u65B9\u5F0F",name:"type",rules:[{required:!0}],style:{maxWidth:400},initialValue:S},y().createElement(m.Z,{onChange:b},l.Z.notificationModes.map(p=>y().createElement(t,{value:p.value},p.label)))),O.map(p=>y().createElement(I.Z.Item,{label:p.label,name:p.label,extra:p.tip,rules:[{required:p.required}],style:{maxWidth:400}},y().createElement(s.Z.TextArea,{autoSize:!0,placeholder:"\u8BF7\u8F93\u5165".concat(p.label)}))),y().createElement(D.Z,{type:"primary",htmlType:"submit"},"\u4FDD\u5B58")))};u.default=h},55541:function(R,u,e){"use strict";e.r(u);var L=e(81968),D=e(88317),K=e(23960),s=e(77059),z=e(88790),_=e(81079),F=e(52261),P=e(51541),I=e(87872),E=e(85529),i=e(4224),m=e(40447),c=e(70307),y=e(73862),r=e(22726),l=e(12924),t=e.n(l),h=e(30827),M=e(58997),o=e(9399),G=e(30163),A=e.n(G),Y=e(13131),U=e(96249),V=e(23311),X=e(58201),S=e(22409),x=r.Z.Title,g=r.Z.Link,a=O=>{var v=O.user,d=O.userChange,B=(0,l.useState)(!1),Z=(0,c.Z)(B,2),$=Z[0],b=Z[1],p=(0,l.useState)(),W=(0,c.Z)(p,2),N=W[0],w=W[1],j=(0,l.useState)(!1),ae=(0,c.Z)(j,2),_e=ae[0],ne=ae[1],Ee=(0,l.useState)(),le=(0,c.Z)(Ee,2),H=le[0],k=le[1],me=(0,l.useState)(),re=(0,c.Z)(me,2),oe=re[0],Q=re[1],te=(0,l.useState)(),q=(0,c.Z)(te,2),ce=q[0],ue=q[1],ge=f=>{h.W.put("".concat(M.Z.apiPrefix,"user"),{data:{username:f.username,password:f.password}}).then(ie=>{localStorage.removeItem(M.Z.authKey),o.m.push("/login")}).catch(ie=>{console.log(ie)})},ve=()=>{N?pe():(se(),ne(!0))},pe=()=>{h.W.put("".concat(M.Z.apiPrefix,"user/two-factor/deactive")).then(f=>{f.data&&(w(!1),d())}).catch(f=>{console.log(f)})},Pe=()=>{b(!0),h.W.put("".concat(M.Z.apiPrefix,"user/two-factor/active"),{data:{code:oe}}).then(f=>{f.data?(m.ZP.success("\u6FC0\u6D3B\u6210\u529F"),ne(!1),w(!0),d()):m.ZP.success("\u9A8C\u8BC1\u5931\u8D25")}).catch(f=>{console.log(f)}).finally(()=>b(!1))},se=()=>{h.W.get("".concat(M.Z.apiPrefix,"user/two-factor/init")).then(f=>{k(f.data)}).catch(f=>{console.log(f)})},fe=f=>{f.file&&f.file.response&&ue("/api/static/".concat(f.file.response.data))};return(0,l.useEffect)(()=>{w(v&&v.twoFactorActivated),ue(v&&"/api/static/".concat(v.avatar))},[v]),_e?t().createElement(t().Fragment,null,H?t().createElement("div",null,t().createElement(x,{level:5},"\u7B2C\u4E00\u6B65"),"\u4E0B\u8F7D\u4E24\u6B65\u9A8C\u8BC1\u624B\u673A\u5E94\u7528\uFF0C\u6BD4\u5982 Google Authenticator \u3001",t().createElement(g,{href:"https://www.microsoft.com/en-us/security/mobile-authenticator-app",target:"_blank"},"Microsoft Authenticator"),"\u3001",t().createElement(g,{href:"https://authy.com/download/",target:"_blank"},"Authy"),"\u3001",t().createElement(g,{href:"https://support.1password.com/one-time-passwords/",target:"_blank"},"1Password"),"\u3001",t().createElement(g,{href:"https://support.logmeininc.com/lastpass/help/lastpass-authenticator-lp030014",target:"_blank"},"LastPass Authenticator"),t().createElement(x,{style:{marginTop:5},level:5},"\u7B2C\u4E8C\u6B65"),"\u4F7F\u7528\u624B\u673A\u5E94\u7528\u626B\u63CF\u4E8C\u7EF4\u7801\uFF0C\u6216\u8005\u8F93\u5165\u79D8\u94A5 ",H==null?void 0:H.secret,t().createElement("div",{style:{marginTop:10}},t().createElement(A(),{style:{border:"1px solid #21262d",borderRadius:6},includeMargin:!0,size:187,value:H==null?void 0:H.url})),t().createElement(x,{style:{marginTop:5},level:5},"\u7B2C\u4E09\u6B65"),"\u8F93\u5165\u624B\u673A\u5E94\u7528\u4E0A\u76846\u4F4D\u6570\u5B57",t().createElement(E.Z,{style:{margin:"10px 0 10px 0",display:"block",maxWidth:200},value:oe,onChange:f=>Q(f.target.value),placeholder:"123456"}),t().createElement(P.Z,{type:"primary",loading:$,onClick:Pe},"\u5B8C\u6210\u8BBE\u7F6E")):t().createElement(Y.Z,null)):t().createElement(t().Fragment,null,t().createElement("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4}},"\u4FEE\u6539\u7528\u6237\u540D\u5BC6\u7801"),t().createElement(_.Z,{onFinish:ge,layout:"vertical"},t().createElement(_.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!0}],hasFeedback:!0,style:{maxWidth:300}},t().createElement(E.Z,{placeholder:"\u7528\u6237\u540D"})),t().createElement(_.Z.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!0},{pattern:/^(?!admin$).*$/,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3Aadmin"}],hasFeedback:!0,style:{maxWidth:300}},t().createElement(E.Z,{type:"password",placeholder:"\u5BC6\u7801"})),t().createElement(P.Z,{type:"primary",htmlType:"submit"},"\u4FDD\u5B58")),t().createElement("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4,marginTop:16}},"\u4E24\u6B65\u9A8C\u8BC1"),t().createElement(P.Z,{type:"primary",danger:N,onClick:ve},N?"\u7981\u7528":"\u542F\u7528"),t().createElement("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4,marginTop:16}},"\u5934\u50CF"),t().createElement(s.C,{size:128,shape:"square",icon:t().createElement(U.Z,null),src:ce}),t().createElement(X.Z,{rotate:!0},t().createElement(D.Z,{method:"put",showUploadList:!1,maxCount:1,action:"/api/user/avatar",onChange:fe,name:"avatar",headers:{Authorization:"Bearer ".concat(localStorage.getItem(M.Z.authKey))}},t().createElement(P.Z,{icon:t().createElement(V.Z,null),style:{marginLeft:8}},"\u66F4\u6362\u5934\u50CF"))))};u.default=a},58997:function(R,u){"use strict";u.Z={siteName:"\u9752\u9F99\u63A7\u5236\u9762\u677F",apiPrefix:"/api/",authKey:"token",layouts:[{name:"primary",include:[/.*/],exclude:[/(\/(en|zh))*\/login/]}],i18n:{languages:[{key:"pt-br",title:"Portugu\xEAs",flag:"/portugal.svg"},{key:"en",title:"English",flag:"/america.svg"},{key:"zh",title:"\u4E2D\u6587",flag:"/china.svg"}],defaultLanguage:"en"},scopes:[{name:"\u5B9A\u65F6\u4EFB\u52A1",value:"crons"},{name:"\u73AF\u5883\u53D8\u91CF",value:"envs"},{name:"\u8BA2\u9605\u7BA1\u7406",value:"subscriptions"},{name:"\u914D\u7F6E\u6587\u4EF6",value:"configs"},{name:"\u811A\u672C\u7BA1\u7406",value:"scripts"},{name:"\u4EFB\u52A1\u65E5\u5FD7",value:"logs"},{name:"\u4F9D\u8D56\u7BA1\u7406",value:"dependencies"},{name:"\u7CFB\u7EDF\u4FE1\u606F",value:"system"}],scopesMap:{crons:"\u5B9A\u65F6\u4EFB\u52A1",envs:"\u73AF\u5883\u53D8\u91CF",subscriptions:"\u8BA2\u9605\u7BA1\u7406",configs:"\u914D\u7F6E\u6587\u4EF6",scripts:"\u811A\u672C\u7BA1\u7406",logs:"\u4EFB\u52A1\u65E5\u5FD7",dependencies:"\u4F9D\u8D56\u7BA1\u7406",system:"\u7CFB\u7EDF\u4FE1\u606F"},notificationModes:[{value:"gotify",label:"Gotify"},{value:"goCqHttpBot",label:"GoCqHttpBot"},{value:"serverChan",label:"Server\u9171"},{value:"pushDeer",label:"PushDeer"},{value:"bark",label:"Bark"},{value:"telegramBot",label:"Telegram\u673A\u5668\u4EBA"},{value:"dingtalkBot",label:"\u9489\u9489\u673A\u5668\u4EBA"},{value:"weWorkBot",label:"\u4F01\u4E1A\u5FAE\u4FE1\u673A\u5668\u4EBA"},{value:"weWorkApp",label:"\u4F01\u4E1A\u5FAE\u4FE1\u5E94\u7528"},{value:"iGot",label:"IGot"},{value:"pushPlus",label:"PushPlus"},{value:"email",label:"\u90AE\u7BB1"},{value:"closed",label:"\u5DF2\u5173\u95ED"}],notificationModeMap:{gotify:[{label:"gotifyUrl",tip:"gotify\u7684url\u5730\u5740,\u4F8B\u5982 https://push.example.de:8080",required:!0},{label:"gotifyToken",tip:"gotify\u7684\u6D88\u606F\u5E94\u7528token\u7801",required:!0},{label:"gotifyPriority",tip:"\u63A8\u9001\u6D88\u606F\u7684\u4F18\u5148\u7EA7"}],goCqHttpBot:[{label:"goCqHttpBotUrl",tip:"\u63A8\u9001\u5230\u4E2A\u4EBAQQ: http://127.0.0.1/send_private_msg\uFF0C\u7FA4\uFF1Ahttp://127.0.0.1/send_group_msg",required:!0},{label:"goCqHttpBotToken",tip:"\u8BBF\u95EE\u5BC6\u94A5",required:!0},{label:"goCqHttpBotQq",tip:"\u5982\u679CGOBOT_URL\u8BBE\u7F6E /send_private_msg \u5219\u9700\u8981\u586B\u5165 user_id=\u4E2A\u4EBAQQ \u76F8\u53CD\u5982\u679C\u662F /send_group_msg \u5219\u9700\u8981\u586B\u5165 group_id=QQ\u7FA4",required:!0}],serverChan:[{label:"serverChanKey",tip:"Server\u9171SENDKEY",required:!0}],pushDeer:[{label:"pushDeerKey",tip:"PushDeer\u7684Key\uFF0Chttps://github.com/easychen/pushdeer",required:!0}],bark:[{label:"barkPush",tip:"Bark\u7684\u4FE1\u606FIP/\u8BBE\u5907\u7801\uFF0C\u4F8B\u5982\uFF1Ahttps://api.day.app/XXXXXXXX",required:!0},{label:"barkIcon",tip:"BARK\u63A8\u9001\u56FE\u6807,\u81EA\u5B9A\u4E49\u63A8\u9001\u56FE\u6807 (\u9700iOS15\u6216\u4EE5\u4E0A\u624D\u80FD\u663E\u793A)"},{label:"barkSound",tip:"BARK\u63A8\u9001\u94C3\u58F0,\u94C3\u58F0\u5217\u8868\u53BBAPP\u67E5\u770B\u590D\u5236\u586B\u5199"},{label:"barkGroup",tip:"BARK\u63A8\u9001\u6D88\u606F\u7684\u5206\u7EC4, \u9ED8\u8BA4\u4E3Aqinglong"}],telegramBot:[{label:"telegramBotToken",tip:"telegram\u673A\u5668\u4EBA\u7684token\uFF0C\u4F8B\u5982\uFF1A1077xxx4424:AAFjv0FcqxxxxxxgEMGfi22B4yh15R5uw",required:!0},{label:"telegramBotUserId",tip:"telegram\u7528\u6237\u7684id\uFF0C\u4F8B\u5982\uFF1A129xxx206",required:!0},{label:"telegramBotProxyHost",tip:"\u4EE3\u7406IP"},{label:"telegramBotProxyPort",tip:"\u4EE3\u7406\u7AEF\u53E3"},{label:"telegramBotProxyAuth",tip:"telegram\u4EE3\u7406\u914D\u7F6E\u8BA4\u8BC1\u53C2\u6570, \u7528\u6237\u540D\u4E0E\u5BC6\u7801\u7528\u82F1\u6587\u5192\u53F7\u8FDE\u63A5 user:password"},{label:"telegramBotApiHost",tip:"telegram api\u81EA\u5EFA\u7684\u53CD\u5411\u4EE3\u7406\u5730\u5740\uFF0C\u9ED8\u8BA4tg\u5B98\u65B9api"}],dingtalkBot:[{label:"dingtalkBotToken",tip:"\u9489\u9489\u673A\u5668\u4EBAwebhook token\uFF0C\u4F8B\u5982\uFF1A5a544165465465645d0f31dca676e7bd07415asdasd",required:!0},{label:"dingtalkBotSecret",tip:"\u5BC6\u94A5\uFF0C\u673A\u5668\u4EBA\u5B89\u5168\u8BBE\u7F6E\u9875\u9762\uFF0C\u52A0\u7B7E\u4E00\u680F\u4E0B\u9762\u663E\u793A\u7684SEC\u5F00\u5934\u7684\u5B57\u7B26\u4E32"}],weWorkBot:[{label:"weWorkBotKey",tip:"\u4F01\u4E1A\u5FAE\u4FE1\u673A\u5668\u4EBA\u7684 webhook(\u8BE6\u89C1\u6587\u6863 https://work.weixin.qq.com/api/doc/90000/90136/91770)\uFF0C\u4F8B\u5982\uFF1A693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa",required:!0}],weWorkApp:[{label:"weWorkAppKey",tip:"corpid,corpsecret,touser(\u6CE8:\u591A\u4E2A\u6210\u5458ID\u4F7F\u7528|\u9694\u5F00),agentid,\u6D88\u606F\u7C7B\u578B(\u9009\u586B,\u4E0D\u586B\u9ED8\u8BA4\u6587\u672C\u6D88\u606F\u7C7B\u578B) \u6CE8\u610F\u7528,\u53F7\u9694\u5F00(\u82F1\u6587\u8F93\u5165\u6CD5\u7684\u9017\u53F7)\uFF0C\u4F8B\u5982\uFF1Awwcfrs,B-76WERQ,qinglong,1000001,2COat",required:!0}],iGot:[{label:"iGotPushKey",tip:"iGot\u7684\u4FE1\u606F\u63A8\u9001key\uFF0C\u4F8B\u5982\uFF1Ahttps://push.hellyw.com/XXXXXXXX",required:!0}],pushPlus:[{label:"pushPlusToken",tip:"\u5FAE\u4FE1\u626B\u7801\u767B\u5F55\u540E\u4E00\u5BF9\u4E00\u63A8\u9001\u6216\u4E00\u5BF9\u591A\u63A8\u9001\u4E0B\u9762\u7684token(\u60A8\u7684Token)\uFF0C\u4E0D\u63D0\u4F9BPUSH_PLUS_USER\u5219\u9ED8\u8BA4\u4E3A\u4E00\u5BF9\u4E00\u63A8\u9001",required:!0},{label:"pushPlusUser",tip:"\u4E00\u5BF9\u591A\u63A8\u9001\u7684\u201C\u7FA4\u7EC4\u7F16\u7801\u201D\uFF08\u4E00\u5BF9\u591A\u63A8\u9001\u4E0B\u9762->\u60A8\u7684\u7FA4\u7EC4(\u5982\u65E0\u5219\u65B0\u5EFA)->\u7FA4\u7EC4\u7F16\u7801\uFF0C\u5982\u679C\u60A8\u662F\u521B\u5EFA\u7FA4\u7EC4\u4EBA\u3002\u4E5F\u9700\u70B9\u51FB\u201C\u67E5\u770B\u4E8C\u7EF4\u7801\u201D\u626B\u63CF\u7ED1\u5B9A\uFF0C\u5426\u5219\u4E0D\u80FD\u63A5\u53D7\u7FA4\u7EC4\u6D88\u606F\u63A8\u9001\uFF09"}],email:[{label:"emailService",tip:"\u90AE\u7BB1\u670D\u52A1\u540D\u79F0\uFF0C\u6BD4\u5982126\u3001163\u3001Gmail\u3001QQ\u7B49\uFF0C\u652F\u6301\u5217\u8868https://nodemailer.com/smtp/well-known/",required:!0},{label:"emailUser",tip:"\u90AE\u7BB1\u5730\u5740",required:!0},{label:"emailPass",tip:"\u90AE\u7BB1SMTP\u6388\u6743\u7801",required:!0}]},documentTitleMap:{"/login":"\u767B\u5F55","/initialization":"\u521D\u59CB\u5316","/cron":"\u5B9A\u65F6\u4EFB\u52A1","/env":"\u73AF\u5883\u53D8\u91CF","/subscription":"\u8BA2\u9605\u7BA1\u7406","/config":"\u914D\u7F6E\u6587\u4EF6","/script":"\u811A\u672C\u7BA1\u7406","/diff":"\u5BF9\u6BD4\u5DE5\u5177","/log":"\u4EFB\u52A1\u65E5\u5FD7","/setting":"\u7CFB\u7EDF\u8BBE\u7F6E","/error":"\u9519\u8BEF\u65E5\u5FD7"},dependenceTypes:["nodejs","python3","linux"]}},30827:function(R,u,e){"use strict";e.d(u,{W:function(){return y}});var L=e(30606),D=e(18158),K=e(4224),s=e(40447),z=e(22205),_=e.n(z),F=e(50659),P=e(58997),I=e(9399);s.ZP.config({duration:1.5});var E=Date.now(),i=function(l){if(l.response){var t=l.data?l.data.message||l.data:l.response.statusText,h=l.response.status;[502,504].includes(h)?I.m.push("/error"):h===401?I.m.location.pathname!=="/login"&&(s.ZP.error("\u767B\u5F55\u5DF2\u8FC7\u671F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55"),localStorage.removeItem(P.Z.authKey),I.m.push("/login")):s.ZP.error(t)}else console.log(l.message);throw l},m=(0,F.l7)({timeout:6e4,params:{t:E},errorHandler:i}),c=["/api/user/login","/open/auth/token","/api/user/two-factor/login","/api/system","/api/user/init","/api/user/notification/init"];m.interceptors.request.use((r,l)=>{var t=localStorage.getItem(P.Z.authKey);if(t&&!c.includes(r)){var h={Authorization:"Bearer ".concat(t)};return{url:r,options:(0,D.Z)((0,D.Z)({},l),{},{headers:h})}}return{url:r,options:l}}),m.interceptors.response.use(function(){var r=(0,L.Z)(_().mark(function l(t){var h;return _().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.clone();case 2:return h=o.sent,o.abrupt("return",t);case 4:case"end":return o.stop()}},l)}));return function(l){return r.apply(this,arguments)}}());var y=m},54521:function(R,u,e){"use strict";e.d(u,{i8:function(){return L},N$:function(){return D}});var L="2.12.2",D="https://t.me/jiao_long/290",K=`2.12.2 \u7248\u672C\u8BF4\u660E
1. \u4EFB\u52A1\u8BE6\u60C5\u652F\u6301\u8FD0\u884C\u3001\u7981\u7528\u3001\u7F6E\u9876\u64CD\u4F5C
2. \u4F9D\u8D56\u7BA1\u7406\u589E\u52A0\u76F4\u63A5\u5F3A\u5236\u5220\u9664
3. \u4FEE\u590D\u73AF\u5883\u53D8\u91CF\u5F15\u53F7\u8F6C\u4E49\u903B\u8F91\uFF0C\u611F\u8C22 https://github.com/JerryWn12 PR
4. \u4FEE\u590D\u5B9A\u65F6\u5220\u9664\u65E5\u5FD7\u8BBE\u7F6E\uFF0C\u652F\u6301\u8BBE\u7F6E\u4E3A24\u5929\u4EE5\u4E0A
5. \u4FEE\u590D\u62C9\u53D6\u811A\u672C\uFF0Cshell\u53D1\u9001\u901A\u77E5
6. \u4FEE\u590Dshell\u83B7\u53D6\u65E5\u5FD7\u76EE\u5F55
`},13621:function(R,u,e){"use strict";var L=e(64520),D=e.n(L),K=e(55984),s=e.n(K),z=e(52261)},64121:function(){}}]);
