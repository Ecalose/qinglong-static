(self.webpackChunk=self.webpackChunk||[]).push([[4756],{87183:function(le){le.exports={"left-tree-container":"left-tree-container___3ivV3","left-tree-scroller":"left-tree-scroller___r-ES6","log-container":"log-container___2Beqi"}},82539:function(le,I,e){"use strict";e.r(I);var He=e(21959),G=e(90486),$e=e(41615),_e=e(1977),Je=e(15961),H=e(89744),ie=e(30606),$=e(27773),S=e(11164),T=e(70307),Qe=e(68677),c=e(84476),de=e(22205),J=e.n(de),K=e(12924),m=e.n(K),ce=e(76225),p=e(6429),me=c.Z.Option,R=s=>{var O=s.handleCancel,ve=s.treeData,Q=s.visible,_=S.Z.useForm(),t=(0,T.Z)(_,1),v=t[0],re=(0,K.useState)(!1),X=(0,T.Z)(re,2),h=X[0],W=X[1],f=(0,K.useState)([]),Y=(0,T.Z)(f,2),A=Y[0],se=Y[1],F=function(){var o=(0,ie.Z)(J().mark(function g(E){return J().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:W(!0),E.path=E.path||"",ce.W.post("".concat(p.Z.apiPrefix,"scripts"),{data:{filename:E.filename,path:E.path,content:""}}).then(w=>{var oe=w.code,q=w.data;oe===200?(H.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),O({filename:E.filename,path:E.path,key:"".concat(E.path,"-").concat(E.filename)})):H.ZP.error(q),W(!1)}).finally(()=>W(!1));case 3:case"end":return U.stop()}},g)}));return function(E){return o.apply(this,arguments)}}();return(0,K.useEffect)(()=>{v.resetFields();var o=ve.filter(g=>g.disabled);se([{key:""},...o])},[Q]),m().createElement(G.Z,{title:"\u65B0\u5EFA\u6587\u4EF6",visible:Q,forceRender:!0,centered:!0,maskClosable:!1,onOk:()=>{v.validateFields().then(o=>{F(o)}).catch(o=>{console.log("Validate Failed:",o)})},onCancel:()=>O(),confirmLoading:h},m().createElement(S.Z,{form:v,layout:"vertical",name:"edit_name_modal"},m().createElement(S.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}]},m().createElement(_e.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})),m().createElement(S.Z.Item,{label:"\u7236\u76EE\u5F55",name:"path",initialValue:A&&A.length>0?A[0].key:""},m().createElement(c.Z,{placeholder:"\u8BF7\u9009\u62E9\u7236\u76EE\u5F55"},A.map(o=>m().createElement(me,{value:o.key},o.key||"\u6839"))))))};I.default=R},13472:function(le,I,e){"use strict";e.r(I);var He=e(29202),G=e(55024),$e=e(21570),_e=e(47965),Je=e(41615),H=e(1977),ie=e(92503),$=e(89772),S=e(34296),T=e(5721),Qe=e(10913),c=e(66650),de=e(3506),J=e(78078),K=e(27594),m=e(29770),ce=e(15961),p=e(89744),me=e(21959),R=e(90486),s=e(70307),O=e(18158),ve=e(57002),Q=e(35513),_=e(12924),t=e.n(_),v=e(6429),re=e(82867),X=e(1858),h=e(76225),W=e(87183),f=e.n(W),Y=e(54411),A=e(45920),se=e(30498),F=e(48487),o=e(36531),g=e(27478),E=e(77062),De=e(82539),U=e(66292),w=e.n(U),oe=e(42954),q=Q.Z.Text;function Pe(D,ee){var P=[];if(D){var x=[];return ee.forEach(C=>{if(C.title.toLocaleLowerCase().includes(D))x.push(C);else{var V=[];(C.children||[]).forEach(b=>{b.title.toLocaleLowerCase().includes(D)&&V.push(b)}),V.length>0&&(x.push((0,O.Z)((0,O.Z)({},C),{},{children:V})),P.push(C.key))}}),{tree:x,expandedKeys:P}}return{tree:ee,expandedKeys:P}}var Xe={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},Ye=D=>{var ee=D.headerStyle,P=D.isPhone,x=D.theme,C=D.socketMessage,V=(0,_.useState)("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),b=(0,s.Z)(V,2),we=b[0],Me=b[1],qe=(0,_.useState)("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),Oe=(0,s.Z)(qe,2),y=Oe[0],L=Oe[1],et=(0,_.useState)(),he=(0,s.Z)(et,2),M=he[0],fe=he[1],tt=(0,_.useState)([]),ge=(0,s.Z)(tt,2),i=ge[0],ue=ge[1],at=(0,_.useState)([]),Ce=(0,s.Z)(at,2),nt=Ce[0],k=Ce[1],lt=(0,_.useState)(!1),ye=(0,s.Z)(lt,2),_t=ye[0],Be=ye[1],rt=(0,_.useState)(""),pe=(0,s.Z)(rt,2),Ae=pe[0],st=pe[1],ot=(0,_.useState)(),Le=(0,s.Z)(ot,2),ut=Le[0],Et=Le[1],te=(0,_.useRef)(),it=(0,_.useState)(!1),Ze=(0,s.Z)(it,2),dt=Ze[0],Ie=Ze[1],ct=(0,_.useState)(""),Se=(0,s.Z)(ct,2),mt=Se[0],vt=Se[1],Dt=(0,_.useState)(!1),Te=(0,s.Z)(Dt,2),ae=Te[0],Z=Te[1],j=(0,_.useRef)(null),Pt=(0,_.useState)(!1),Ke=(0,s.Z)(Pt,2),Mt=Ke[0],Re=Ke[1],Ot=(0,_.useState)(),We=(0,s.Z)(Ot,2),u=We[0],Fe=We[1],ht=(0,_.useState)([]),Ue=(0,s.Z)(ht,2),ft=Ue[0],Ee=Ue[1],gt=()=>{Be(!0),h.W.get("".concat(v.Z.apiPrefix,"scripts")).then(a=>{ue(a.data),k(a.data),Ct()}).finally(()=>Be(!1))},xe=a=>{h.W.get("".concat(v.Z.apiPrefix,"scripts/").concat(a.value,"?path=").concat(a.parent||"")).then(n=>{L(n.data)})},Ct=()=>{var a=oe.m.location.query,n=a.p,l=a.s;if(l){var r="".concat(n,"/").concat(l),N={node:{title:l,value:l,key:n?r:l,parent:n}};Ee([n]),Ve([r],N)}},ne=(a,n)=>{if(!(n.key===M||!a)){L("\u52A0\u8F7D\u4E2D...");var l=a?Xe[a.slice(-3)]:"";st(P&&l==="typescript"?"javascript":l),fe(n.key),Me(n.key),Fe(n),xe(n)}},yt=a=>{Ee(a)},Ve=(0,_.useCallback)((a,n)=>{var l=j.current?j.current.getValue().replace(/\r\n/g,`
`):y;l!==y?R.Z.confirm({title:"\u786E\u8BA4\u79BB\u5F00",content:t().createElement(t().Fragment,null,"\u5F53\u524D\u4FEE\u6539\u672A\u4FDD\u5B58\uFF0C\u786E\u5B9A\u79BB\u5F00\u5417"),onOk(){ne(a[0],n.node),Z(!1)},onCancel(){console.log("Cancel")}}):(Z(!1),ne(a[0],n.node))},[y]),Bt=(0,_.useCallback)(a=>{var n=a.target.value;pt(n)},[i,k]),pt=(0,_.useCallback)(w()(a=>{vt(a);var n=Pe(a.toLocaleLowerCase(),i),l=n.tree,r=n.expandedKeys;Ee(r),k(l)},300),[i,k]),be=()=>{setTimeout(()=>{Z(!0)},300)},ke=()=>{Z(!1),L("\u52A0\u8F7D\u4E2D..."),xe(u)},je=()=>{R.Z.confirm({title:"\u786E\u8BA4\u4FDD\u5B58",content:t().createElement(t().Fragment,null,"\u786E\u8BA4\u4FDD\u5B58\u6587\u4EF6",t().createElement(q,{style:{wordBreak:"break-all"},type:"warning"},u.value)," ","\uFF0C\u4FDD\u5B58\u540E\u4E0D\u53EF\u6062\u590D"),onOk(){var a=j.current?j.current.getValue().replace(/\r\n/g,`
`):y;return new Promise((n,l)=>{h.W.put("".concat(v.Z.apiPrefix,"scripts"),{data:{filename:u.value,path:u.parent||"",content:a}}).then(r=>{r.code===200?(p.ZP.success("\u4FDD\u5B58\u6210\u529F"),L(a),Z(!1)):p.ZP.error(r),n(null)}).catch(r=>l(r))})},onCancel(){console.log("Cancel")}})},Ne=()=>{R.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:t().createElement(t().Fragment,null,"\u786E\u8BA4\u5220\u9664\u6587\u4EF6",t().createElement(q,{style:{wordBreak:"break-all"},type:"warning"},M)," ","\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D"),onOk(){h.W.delete("".concat(v.Z.apiPrefix,"scripts"),{data:{filename:u.value,path:u.parent||""}}).then(a=>{if(a.code===200){p.ZP.success("\u5220\u9664\u6210\u529F");var n=[...i];if(u.parent){var l=n.findIndex(d=>d.key===u.parent),r=n[l],N=r.children.findIndex(d=>d.key===u.key);r.children.splice(N,1),n.splice(l,1,(0,O.Z)({},r))}else{var B=n.findIndex(d=>d.key===u.key);n.splice(B,1)}ue(n)}else p.ZP.error(a)})},onCancel(){console.log("Cancel")}})},ze=()=>{Re(!0)},At=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filename:"",path:"",key:""},l=n.filename,r=n.path,N=n.key;if(l){var B=[...i],d={title:l,key:N,value:l,parent:r};if(r){var Ge=B.findIndex(St=>St.key===r),z=B[Ge];z.children&&z.children.length>0?z.children.unshift(d):z.children=[d],B.splice(Ge,1,(0,O.Z)({},z))}else B.unshift(d);ue(B),ne(d.value,d),Z(!0)}Re(!1)},Tt=()=>{h.W.post("".concat(v.Z.apiPrefix,"scripts/download"),{data:{filename:u.value}}).then(a=>{var n=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(n),r=document.createElement("a");r.href=l,r.download=u.value,document.documentElement.appendChild(r),r.click(),document.documentElement.removeChild(r)})};(0,_.useEffect)(()=>{var a=mt||"",n=Pe(a.toLocaleLowerCase(),i),l=n.tree;k(l),fe(""),Fe(null),Me("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),L("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6")},[i]),(0,_.useEffect)(()=>{gt(),te&&te.current&&Et(te.current.clientHeight)},[]);var Lt=a=>{switch(a){case"save":je();break;case"exit":ke();break;default:break}},Zt=a=>{switch(a){case"save":ze();break;case"edit":be();break;case"delete":Ne();break;default:break}},It=ae?t().createElement(m.Z,{items:[{label:"\u4FDD\u5B58",key:"save",icon:t().createElement(F.Z,null)},{label:"\u9000\u51FA\u7F16\u8F91",key:"exit",icon:t().createElement(o.Z,null)}],onClick:a=>{var n=a.key,l=a.domEvent;l.stopPropagation(),Lt(n)}}):t().createElement(m.Z,{items:[{label:"\u65B0\u5EFA",key:"add",icon:t().createElement(F.Z,null)},{label:"\u7F16\u8F91",key:"edit",icon:t().createElement(o.Z,null),disabled:!M},{label:"\u5220\u9664",key:"delete",icon:t().createElement(g.Z,null),disabled:!M}],onClick:a=>{var n=a.key,l=a.domEvent;l.stopPropagation(),Zt(n)}});return t().createElement(re.ZP,{className:"ql-container-wrapper log-wrapper",title:we,loading:_t,extra:P?[t().createElement(J.Z,{className:"log-select",value:M,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:i,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C",showSearch:!0,onSelect:ne}),t().createElement(T.Z,{overlay:It,trigger:["click"]},t().createElement(c.Z,{type:"primary",icon:t().createElement(E.Z,null)}))]:ae?[t().createElement(c.Z,{type:"primary",onClick:je},"\u4FDD\u5B58"),t().createElement(c.Z,{type:"primary",onClick:ke},"\u9000\u51FA\u7F16\u8F91")]:[t().createElement($.Z,{title:"\u65B0\u5EFA"},t().createElement(c.Z,{type:"primary",onClick:ze,icon:t().createElement(F.Z,null)})),t().createElement($.Z,{title:"\u7F16\u8F91"},t().createElement(c.Z,{disabled:!M,type:"primary",onClick:be,icon:t().createElement(o.Z,null)})),t().createElement($.Z,{title:"\u5220\u9664"},t().createElement(c.Z,{type:"primary",disabled:!M,onClick:Ne,icon:t().createElement(g.Z,null)})),t().createElement(c.Z,{type:"primary",onClick:()=>{Ie(!0)}},"\u8C03\u8BD5")],header:{style:ee}},t().createElement("div",{className:"".concat(f()["log-container"]," log-container")},!P&&t().createElement(se.Z,{split:"vertical",size:200,maxSize:-100},t().createElement("div",{className:f()["left-tree-container"]},i.length>0?t().createElement(t().Fragment,null,t().createElement(H.Z.Search,{className:f()["left-tree-search"],onChange:Bt,placeholder:"\u8BF7\u8F93\u5165\u811A\u672C\u540D",allowClear:!0}),t().createElement("div",{className:f()["left-tree-scroller"],ref:te},t().createElement(_e.Z,{className:f()["left-tree"],treeData:nt,showIcon:!0,height:ut,selectedKeys:[M],expandedKeys:ft,onExpand:yt,showLine:{showLeafIcon:!0},onSelect:Ve}))):t().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},t().createElement(G.Z,{description:"\u6682\u65E0\u811A\u672C",image:G.Z.PRESENTED_IMAGE_SIMPLE}))),t().createElement(X.ZP,{language:Ae,value:y,theme:x,options:{readOnly:!ae,fontSize:12,lineNumbersMinChars:3,folding:!1,glyphMargin:!1},onMount:a=>{j.current=a}})),P&&t().createElement(A.fk,{value:y,options:{lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,mode:Ae,readOnly:!ae},onBeforeChange:(a,n,l)=>{L(l)},onChange:(a,n,l)=>{}}),t().createElement(Y.default,{visible:dt,treeData:i,currentNode:u,content:y,socketMessage:C,handleCancel:()=>{Ie(!1)}}),t().createElement(De.default,{visible:Mt,treeData:i,handleCancel:At})))};I.default=Ye}}]);
