(self.webpackChunk=self.webpackChunk||[]).push([[4756],{62999:function(le){le.exports={"left-tree-container":"left-tree-container___3ivV3","left-tree-scroller":"left-tree-scroller___r-ES6","log-container":"log-container___2Beqi"}},52407:function(le,I,e){"use strict";e.r(I);var ke=e(13621),$=e(13409),Je=e(87872),_e=e(85529),Qe=e(4224),k=e(40447),ie=e(30606),J=e(88790),F=e(81079),S=e(70307),Xe=e(68875),m=e(69861),ce=e(22205),Q=e.n(ce),T=e(12924),u=e.n(T),de=e(30827),p=e(58997),me=m.Z.Option,K=s=>{var O=s.handleCancel,ve=s.treeData,X=s.visible,_=F.Z.useForm(),t=(0,S.Z)(_,1),v=t[0],re=(0,T.useState)(!1),Y=(0,S.Z)(re,2),f=Y[0],R=Y[1],h=(0,T.useState)([]),b=(0,S.Z)(h,2),A=b[0],se=b[1],W=function(){var o=(0,ie.Z)(Q().mark(function g(i){return Q().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:R(!0),i.path=i.path||"",de.W.post("".concat(p.Z.apiPrefix,"scripts"),{data:{filename:i.filename,path:i.path,content:""}}).then(w=>{var ue=w.code,q=w.data;ue===200?(k.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),O({filename:i.filename,path:i.path,key:"".concat(i.path,"-").concat(i.filename)})):k.ZP.error(q),R(!1)}).finally(()=>R(!1));case 3:case"end":return U.stop()}},g)}));return function(i){return o.apply(this,arguments)}}();return(0,T.useEffect)(()=>{v.resetFields();var o=ve.filter(g=>g.disabled);se([{key:""},...o])},[X]),u().createElement($.Z,{title:"\u65B0\u5EFA\u6587\u4EF6",visible:X,forceRender:!0,centered:!0,onOk:()=>{v.validateFields().then(o=>{W(o)}).catch(o=>{console.log("Validate Failed:",o)})},onCancel:()=>O(),confirmLoading:f},u().createElement(F.Z,{form:v,layout:"vertical",name:"edit_name_modal"},u().createElement(F.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}]},u().createElement(_e.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})),u().createElement(F.Z.Item,{label:"\u7236\u76EE\u5F55",name:"path",initialValue:A&&A.length>0?A[0].key:""},u().createElement(m.Z,{placeholder:"\u8BF7\u9009\u62E9\u7236\u76EE\u5F55"},A.map(o=>u().createElement(me,{value:o.key},o.key||"\u6839"))))))};I.default=K},73380:function(le,I,e){"use strict";e.r(I);var ke=e(81825),$=e(10095),Je=e(45576),_e=e(41673),Qe=e(87872),k=e(85529),ie=e(98983),J=e(14556),F=e(74883),S=e(85728),Xe=e(52261),m=e(51541),ce=e(49e3),Q=e(58460),T=e(67540),u=e(94147),de=e(4224),p=e(40447),me=e(13621),K=e(13409),s=e(70307),O=e(18158),ve=e(73862),X=e(22726),_=e(12924),t=e.n(_),v=e(58997),re=e(85844),Y=e(19635),f=e(30827),R=e(62999),h=e.n(R),b=e(25549),A=e(40153),se=e(30498),W=e(48487),o=e(36531),g=e(27478),i=e(77062),De=e(52407),U=e(66292),w=e.n(U),ue=e(9399),q=X.Z.Text;function Me(D,ee){var M=[];if(D){var x=[];return ee.forEach(C=>{if(C.title.toLocaleLowerCase().includes(D))x.push(C);else{var V=[];(C.children||[]).forEach(j=>{j.title.toLocaleLowerCase().includes(D)&&V.push(j)}),V.length>0&&(x.push((0,O.Z)((0,O.Z)({},C),{},{children:V})),M.push(C.key))}}),{tree:x,expandedKeys:M}}return{tree:ee,expandedKeys:M}}var Ye={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},be=D=>{var ee=D.headerStyle,M=D.isPhone,x=D.theme,C=D.socketMessage,V=(0,_.useState)("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),j=(0,s.Z)(V,2),we=j[0],Pe=j[1],qe=(0,_.useState)("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),Oe=(0,s.Z)(qe,2),y=Oe[0],L=Oe[1],et=(0,_.useState)(),fe=(0,s.Z)(et,2),P=fe[0],he=fe[1],tt=(0,_.useState)([]),ge=(0,s.Z)(tt,2),c=ge[0],oe=ge[1],at=(0,_.useState)([]),Ce=(0,s.Z)(at,2),nt=Ce[0],N=Ce[1],lt=(0,_.useState)(!1),ye=(0,s.Z)(lt,2),_t=ye[0],Be=ye[1],rt=(0,_.useState)(""),pe=(0,s.Z)(rt,2),Ae=pe[0],st=pe[1],ut=(0,_.useState)(),Le=(0,s.Z)(ut,2),ot=Le[0],Et=Le[1],te=(0,_.useRef)(),it=(0,_.useState)(!1),Ze=(0,s.Z)(it,2),ct=Ze[0],Ie=Ze[1],dt=(0,_.useState)(""),Fe=(0,s.Z)(dt,2),mt=Fe[0],vt=Fe[1],Dt=(0,_.useState)(!1),Se=(0,s.Z)(Dt,2),ae=Se[0],Z=Se[1],z=(0,_.useRef)(null),Mt=(0,_.useState)(!1),Te=(0,s.Z)(Mt,2),Pt=Te[0],Ke=Te[1],Ot=(0,_.useState)(),Re=(0,s.Z)(Ot,2),E=Re[0],We=Re[1],ft=(0,_.useState)([]),Ue=(0,s.Z)(ft,2),ht=Ue[0],Ee=Ue[1],gt=()=>{Be(!0),f.W.get("".concat(v.Z.apiPrefix,"scripts/files")).then(n=>{oe(n.data),N(n.data),Ct()}).finally(()=>Be(!1))},xe=n=>{f.W.get("".concat(v.Z.apiPrefix,"scripts/").concat(n.value,"?path=").concat(n.parent||"")).then(a=>{L(a.data)})},Ct=()=>{var n=ue.m.location.query,a=n.p,l=n.s;if(l){var r="".concat(a,"/").concat(l),G={node:{title:l,value:l,key:a?r:l,parent:a}};Ee([a]),Ve([r],G)}},ne=(n,a)=>{if(!(a.key===P||!n)){L("\u52A0\u8F7D\u4E2D...");var l=n?Ye[n.slice(-3)]:"";st(M&&l==="typescript"?"javascript":l),he(a.key),Pe(a.parent||a.value),We(a),xe(a)}},yt=n=>{Ee(n)},Ve=(0,_.useCallback)((n,a)=>{var l=z.current?z.current.getValue().replace(/\r\n/g,`
`):y;l!==y?K.Z.confirm({title:"\u786E\u8BA4\u79BB\u5F00",content:t().createElement(t().Fragment,null,"\u5F53\u524D\u4FEE\u6539\u672A\u4FDD\u5B58\uFF0C\u786E\u5B9A\u79BB\u5F00\u5417"),onOk(){ne(n[0],a.node),Z(!1)},onCancel(){console.log("Cancel")}}):(Z(!1),ne(n[0],a.node))},[y]),Bt=(0,_.useCallback)(n=>{var a=n.target.value;pt(a)},[c,N]),pt=(0,_.useCallback)(w()(n=>{vt(n);var a=Me(n.toLocaleLowerCase(),c),l=a.tree,r=a.expandedKeys;Ee(r),N(l)},300),[c,N]),je=()=>{setTimeout(()=>{Z(!0)},300)},Ne=()=>{Z(!1),L("\u52A0\u8F7D\u4E2D..."),xe(E)},ze=()=>{K.Z.confirm({title:"\u786E\u8BA4\u4FDD\u5B58",content:t().createElement(t().Fragment,null,"\u786E\u8BA4\u4FDD\u5B58\u6587\u4EF6",t().createElement(q,{style:{wordBreak:"break-all"},type:"warning"},E.value)," ","\uFF0C\u4FDD\u5B58\u540E\u4E0D\u53EF\u6062\u590D"),onOk(){var n=z.current?z.current.getValue().replace(/\r\n/g,`
`):y;return new Promise((a,l)=>{f.W.put("".concat(v.Z.apiPrefix,"scripts"),{data:{filename:E.value,path:E.parent||"",content:n}}).then(r=>{r.code===200?(p.ZP.success("\u4FDD\u5B58\u6210\u529F"),L(n),Z(!1)):p.ZP.error(r),a(null)}).catch(r=>l(r))})},onCancel(){console.log("Cancel")}})},Ge=()=>{K.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:t().createElement(t().Fragment,null,"\u786E\u8BA4\u5220\u9664\u6587\u4EF6",t().createElement(q,{style:{wordBreak:"break-all"},type:"warning"},P)," ","\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D"),onOk(){f.W.delete("".concat(v.Z.apiPrefix,"scripts"),{data:{filename:E.value,path:E.parent||""}}).then(n=>{if(n.code===200){p.ZP.success("\u5220\u9664\u6210\u529F");var a=[...c];if(E.parent){var l=a.findIndex(d=>d.key===E.parent),r=a[l],G=r.children.findIndex(d=>d.key===E.key);r.children.splice(G,1),a.splice(l,1,(0,O.Z)({},r))}else{var B=a.findIndex(d=>d.key===E.key);a.splice(B,1)}oe(a)}else p.ZP.error(n)})},onCancel(){console.log("Cancel")}})},He=()=>{Ke(!0)},At=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filename:"",path:"",key:""},l=a.filename,r=a.path,G=a.key;if(l){var B=[...c],d={title:l,key:G,value:l,parent:r};if(r){var $e=B.findIndex(Zt=>Zt.key===r),H=B[$e];H.children&&H.children.length>0?H.children.unshift(d):H.children=[d],B.splice($e,1,(0,O.Z)({},H))}else B.unshift(d);oe(B),ne(d.value,d),Z(!0)}Ke(!1)},It=()=>{f.W.post("".concat(v.Z.apiPrefix,"scripts/download"),{data:{filename:E.value}}).then(n=>{var a=new Blob([n],{type:"application/json"}),l=URL.createObjectURL(a),r=document.createElement("a");r.href=l,r.download=E.value,document.documentElement.appendChild(r),r.click(),document.documentElement.removeChild(r)})};(0,_.useEffect)(()=>{var n=mt||"",a=Me(n.toLocaleLowerCase(),c),l=a.tree;N(l),he(""),We(null),Pe("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),L("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6")},[c]),(0,_.useEffect)(()=>{gt(),te&&te.current&&Et(te.current.clientHeight)},[]);var Lt=ae?t().createElement(u.Z,null,t().createElement(u.Z.Item,{key:"save",icon:t().createElement(W.Z,null),onClick:ze},"\u4FDD\u5B58"),t().createElement(u.Z.Item,{key:"exit",icon:t().createElement(o.Z,null),onClick:Ne},"\u9000\u51FA\u7F16\u8F91")):t().createElement(u.Z,null,t().createElement(u.Z.Item,{key:"add",icon:t().createElement(W.Z,null),onClick:He},"\u65B0\u5EFA"),t().createElement(u.Z.Item,{key:"edit",icon:t().createElement(o.Z,null),onClick:je,disabled:!P},"\u7F16\u8F91"),t().createElement(u.Z.Item,{key:"delete",icon:t().createElement(g.Z,null),onClick:Ge,disabled:!P},"\u5220\u9664"));return t().createElement(re.ZP,{className:"ql-container-wrapper log-wrapper",title:we,loading:_t,extra:M?[t().createElement(Q.Z,{className:"log-select",value:P,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:c,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C",showSearch:!0,onSelect:ne}),t().createElement(S.Z,{overlay:Lt,trigger:["click"]},t().createElement(m.Z,{type:"primary",icon:t().createElement(i.Z,null)}))]:ae?[t().createElement(m.Z,{type:"primary",onClick:ze},"\u4FDD\u5B58"),t().createElement(m.Z,{type:"primary",onClick:Ne},"\u9000\u51FA\u7F16\u8F91")]:[t().createElement(J.Z,{title:"\u65B0\u5EFA"},t().createElement(m.Z,{type:"primary",onClick:He,icon:t().createElement(W.Z,null)})),t().createElement(J.Z,{title:"\u7F16\u8F91"},t().createElement(m.Z,{disabled:!P,type:"primary",onClick:je,icon:t().createElement(o.Z,null)})),t().createElement(J.Z,{title:"\u5220\u9664"},t().createElement(m.Z,{type:"primary",disabled:!P,onClick:Ge,icon:t().createElement(g.Z,null)})),t().createElement(m.Z,{type:"primary",onClick:()=>{Ie(!0)}},"\u8C03\u8BD5")],header:{style:ee}},t().createElement("div",{className:"".concat(h()["log-container"]," log-container")},!M&&t().createElement(se.Z,{split:"vertical",size:200,maxSize:-100},t().createElement("div",{className:h()["left-tree-container"]},c.length>0?t().createElement(t().Fragment,null,t().createElement(k.Z.Search,{className:h()["left-tree-search"],onChange:Bt,placeholder:"\u8BF7\u8F93\u5165\u811A\u672C\u540D",allowClear:!0}),t().createElement("div",{className:h()["left-tree-scroller"],ref:te},t().createElement(_e.Z,{className:h()["left-tree"],treeData:nt,showIcon:!0,height:ot,selectedKeys:[P],expandedKeys:ht,onExpand:yt,showLine:{showLeafIcon:!0},onSelect:Ve}))):t().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},t().createElement($.Z,{description:"\u6682\u65E0\u811A\u672C",image:$.Z.PRESENTED_IMAGE_SIMPLE}))),t().createElement(Y.ZP,{language:Ae,value:y,theme:x,options:{readOnly:!ae,fontSize:12,lineNumbersMinChars:3,folding:!1,glyphMargin:!1},onMount:n=>{z.current=n}})),M&&t().createElement(A.fk,{value:y,options:{lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,mode:Ae,readOnly:!ae},onBeforeChange:(n,a,l)=>{L(l)},onChange:(n,a,l)=>{}}),t().createElement(b.default,{visible:ct,treeData:c,currentNode:E,content:y,socketMessage:C,handleCancel:()=>{Ie(!1)}}),t().createElement(De.default,{visible:Pt,treeData:c,handleCancel:At})))};I.default=be}}]);
